/*!
 * @overview  Master Slider Wordpress Panel
 * @copyright Copyright 2014 Averta Ltd.
 * @version   2.0.0
 * http://www.averta.net
 */
var STAGE_WIDTH,STAGE_HEIGHT,EFF_STAGE_WIDTH,EFF_STAGE_HEIGHT;window.MSPanel=Ember.Application.create({rootElement:"#msp-root"}),MSPanel.version="2.0.0",MSPanel.SliderID=parseQueryString(window.location.search).slider_id||__MSP_SLIDER_ID||"100",MSPanel.dependedControllers=[],(__MSP_TYPE==="flickr"||__MSP_TYPE==="post"||__MSP_TYPE==="facebook"||__MSP_TYPE==="wc-product")&&(MSPanel.dynamicTags=[]),String.prototype.jfmt=function(){return"".fmt.apply(this.replace(/%s|%d/,"%@"),arguments)},$=jQuery.noConflict(),jQuery.ui.dialog.prototype._focusTabbable=function(){},MSPanel.Router.map(function(){this.resource("settings"),this.resource("slides",{path:"/"}),this.resource("controls"),this.resource("callbacks"),this.resource("error"),__MSP_TYPE==="flickr"&&this.resource("flickr"),__MSP_TYPE==="facebook"&&this.resource("facebook"),__MSP_TYPE==="post"&&this.resource("post"),__MSP_TYPE==="wc-product"&&this.resource("wcproduct")}),MSPanel.Router.reopen({location:"none"}),MSPanel.ApplicationRoute=Ember.Route.extend({model:function(){var n=MSPanel.Settings.find();n.get("length")===0&&MSPanel.Settings.create().save()}}),MSPanel.SettingsRoute=Ember.Route.extend({model:function(){return MSPanel.Settings.find(1)},setupController:function(n,t){n.set("model",t),n.setup()}}),__MSP_TYPE==="flickr"&&(MSPanel.FlickrRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("flickr").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("flickr").set("model",MSPanel.Settings.find(1)),this.controllerFor("flickr").setup()})),__MSP_TYPE==="facebook"&&(MSPanel.FacebookRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("facebook").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("facebook").set("model",MSPanel.Settings.find(1)),this.controllerFor("facebook").setup()})),__MSP_TYPE==="post"&&(MSPanel.PostRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("post").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("post").set("model",MSPanel.Settings.find(1)),this.controllerFor("post").setup()})),__MSP_TYPE==="wc-product"&&(MSPanel.WcproductRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("wcproduct").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("wcproduct").set("model",MSPanel.Settings.find(1)),this.controllerFor("wcproduct").setup()})),MSPanel.SlidesRoute=Ember.Route.extend({model:function(){return MSPanel.Slide.find()},setupController:function(n,t){n.set("model",t),n.set("sliderSettings",MSPanel.Settings.find(1));var i=MSPanel.StylesController.create({model:MSPanel.Style.find(),presetStyles:MSPanel.PresetStyle.find(),parent:n}),r=MSPanel.EffectsController.create({model:MSPanel.Effect.find(),presetEffects:MSPanel.PresetEffect.find(),parent:n,container:MSPanel.__container__}),u=MSPanel.ButtonsController.create({model:MSPanel.ButtonStyle.find(),parent:n,container:MSPanel.__container__});n.set("stylesController",i),n.set("effectsController",r),n.set("buttonsController",u),n.setup(),MSPanel.dependedControllers.length>0&&Ember.run.scheduleOnce("afterRender",this,this.setupDependedControllers)},setupDependedControllers:function(){for(var n=0,t=MSPanel.dependedControllers.length;n!==t;n++)MSPanel.dependedControllers[n].call(this)}}),MSPanel.ControlsRoute=Ember.Route.extend({model:function(){return MSPanel.Control.find()},setupController:function(n,t){n.set("model",t),n.setup(),this.activate()},activate:function(){var n=this.get("controller");n&&n.set("controlOptions","empty-template")}}),MSPanel.CallbacksRoute=Ember.Route.extend({model:function(){return MSPanel.Callback.find()},setupController:function(n,t){n.set("model",t),n.setup()}}),function(){var n=Ember.attr,f=Ember.hasMany,r=Ember.belongsTo,u=/https\:|http\:/,t={serialize:function(n){return n==undefined?n:u.test(n)?n.replace(__MS.upload_dir,""):n},deserialize:function(n){return n==undefined?n:u.test(n)?n:__MS.upload_dir+n}},i;MSPanel.Settings=Ember.Model.extend({id:n("number"),snapping:n("boolean",{defaultValue:!0}),bgImageThumb:n(t),disableControls:n("boolean",{defaultValue:!1}),name:n("string",{defaultValue:__MSP_LAN.sm_001}),width:n("number",{defaultValue:1e3}),height:n("number",{defaultValue:500}),wrapperWidth:n("number"),wrapperWidthUnit:n("string",{defaultValue:"px"}),autoCrop:n("boolean",{defaultValue:!1}),type:n("string"),sliderId:n("string"),layout:n("string",{defaultValue:"boxed"}),autoHeight:n("boolean",{defaultValue:!1}),trView:n("string",{defaultValue:"basic"}),speed:n("number",{defaultValue:20}),space:n("number",{defaultValue:0}),start:n("number",{defaultValue:1}),grabCursor:n("boolean",{defaultValue:!0}),swipe:n("boolean",{defaultValue:!0}),mouse:n("boolean",{defaultValue:!0}),wheel:n("boolean",{defaultValue:!1}),autoplay:n("boolean",{defaultValue:!1}),loop:n("boolean",{defaultValue:!1}),shuffle:n("boolean",{defaultValue:!1}),preload:n("string",{defaultValue:"-1"}),overPause:n("boolean",{defaultValue:!0}),endPause:n("boolean",{defaultValue:!1}),hideLayers:n("boolean",{defaultValue:!1}),dir:n("string",{defaultValue:"h"}),parallaxMode:n("srting",{defaultValue:"swipe"}),centerControls:n("boolean",{defaultValue:!0}),instantShowLayers:n("boolean",{defaultValue:!1}),fullscreenMargin:n("number"),inlineStyle:n("string"),className:n("string"),bgColor:n("string"),bgImage:n(t),skin:n("string",{defaultValue:"ms-skin-default"}),msTemplate:n("string",{defaultValue:"custom"}),msTemplateClass:n("string",{defaultValue:""}),usedFonts:n("string"),apiKey:n("string"),setId:n("string"),setType:n("string"),imgCount:n("number"),thumbSize:n("srting"),imgSize:n("string"),postType:n("string"),postCats:n(Array),postTags:n(Array),postCount:n("number"),postImageType:n("string"),postOrder:n("string"),postOrderDir:n("string"),postExcerptLen:n("number"),postExcludeIds:n("string"),postOffset:n("number"),postLinkSlide:n("boolean"),postLinkTarget:n("string"),postSlideBg:n("string"),postSlideBgthumb:n("string"),wcOnlyInstock:n("boolean"),wcOnlyFeatured:n("boolean"),wcOnlyOnsale:n("boolean")}),MSPanel.Slide=Ember.Model.extend({id:n("number"),timeline_h:n("number",{defaultValue:200}),bgThumb:n(t),thumbOrginal:n(t),order:n("number"),ishide:n("boolean"),bg:n(t),duration:n("number",{defaultValue:3}),fillMode:n("string",{defaultValue:"fill"}),thumb:n(t),info:n("string"),link:n("string"),linkTarget:n("string"),video:n("string"),bgColor:n("string"),pattern:n("string"),bgv_mp4:n("string"),bgv_ogg:n("string"),bgv_webm:n("string"),bgv_fillmode:n("string",{defaultValue:"fill"}),bgv_loop:n("boolean",{defaultValue:!0}),bgv_mute:n("boolean",{defaultValue:!0}),bgv_autopause:n("boolean",{defaultValue:!1}),cssId:n("string"),cssClass:n("string"),bgAlt:n("string"),layers:f("MSPanel.Layer",{key:"layer_ids"})}),MSPanel.Layer=Ember.Model.extend({id:n("number"),name:n("string"),isLocked:n("boolean",{defaultValue:!1}),isHided:n("boolean",{defaultValue:!1}),isSoloed:n("boolean",{defaultValue:!1}),slide:r("MSPanel.Slide",{key:"slide"}),styleModel:r("MSPanel.Style",{key:"styleModel",embedded:!1}),showEffect:r("MSPanel.Effect",{key:"showEffect",embedded:!1}),showTransform:n("string",{defaultValue:""}),showOrigin:n("string",{defaultValue:""}),showFade:n("boolean",{defaultValue:!0}),hideEffect:r("MSPanel.Effect",{key:"hideEffect",embedded:!1}),hideTransform:n("string",{defaultValue:""}),hideOrigin:n("string",{defaultValue:""}),hideFade:n("boolean",{defaultValue:!0}),imgThumb:n(t),stageOffsetX:n("number",{defaultValue:0}),stageOffsetY:n("number",{defaultValue:0}),order:n("number"),type:n("string"),cssClass:n("string"),cssId:n("string"),title:n("string"),rel:n("string"),content:n("string",{defaultValue:"Lorem Ipsum"}),img:n(t),imgAlt:n("string"),video:n("string",{defaultValue:"http://player.vimeo.com/video/11721242"}),align:n("string",{defaultValue:"top"}),useAction:n("boolean",{defaultValue:!1}),action:n("string"),toSlide:n("number"),link:n("string"),linkTarget:n("string"),offsetX:n("number",{defaultValue:0}),offsetY:n("number",{defaultValue:0}),width:n("number"),height:n("number"),resize:n("boolean",{defaultValue:!0}),fixed:n("boolean",{defaultValue:!1}),widthlimit:n("number",{defaultValue:"0"}),origin:n("string",{defaultValue:"tl"}),stayHover:n("boolean",{defaultValue:!0}),className:n("string"),parallax:n("string"),showDuration:n("number",{defaultValue:1}),showDelay:n("number",{defaultValue:0}),showEase:n("string",{defaultValue:"easeOutQuint"}),showEffFunc:n("string"),useHide:n("boolean",{defaultValue:!1}),hideDuration:n("number",{defaultValue:1}),hideDelay:n("number",{defaultValue:1}),hideEase:n("string",{defaultValue:"easeOutQuint"}),hideEffFunc:n("string"),btnClass:n("string",{defaultValue:"ms-btn ms-default-btn"})}),MSPanel.Style=Ember.Model.extend({id:n("number"),name:n("string"),type:n("string"),className:n("string"),backgroundColor:n("string"),paddingTop:n("number"),paddingRight:n("number"),paddingBottom:n("number"),paddingLeft:n("number"),borderTop:n("number"),borderRight:n("number"),borderBottom:n("number"),borderLeft:n("number"),borderColor:n("string"),borderRadius:n("number"),borderStyle:n("string"),fontFamily:n("string"),fontWeight:n("string",{defaultValue:"normal"}),fontSize:n("number"),textAlign:n("string"),letterSpacing:n("number"),lineHeight:n("string",{defaultValue:"normal"}),whiteSpace:n("string"),color:n("string"),custom:n("string")}),MSPanel.PresetStyle=MSPanel.Style.extend({}),MSPanel.Effect=Ember.Model.extend({id:n("number"),name:n("string"),type:n("string"),fade:n("boolean",{defaultValue:!0}),translateX:n("number"),translateY:n("number"),translateZ:n("number"),scaleX:n("number"),scaleY:n("number"),rotate:n("number"),rotateX:n("number"),rotateY:n("number"),rotateZ:n("number"),skewX:n("number"),skewY:n("number"),originX:n("number"),originY:n("number"),originZ:n("number")}),MSPanel.PresetEffect=MSPanel.Effect.extend({}),MSPanel.Control=Ember.Model.extend({id:n("number"),label:n("string"),name:n("string"),autoHide:n("boolean",{defaultValue:!0}),overVideo:n("boolean",{defaultValue:!0}),cssClass:n("string"),cssId:n("string"),margin:n("number"),dir:n("string"),color:n("string"),radius:n("number"),stroke:n("number"),speed:n("number"),space:n("number"),type:n("string"),width:n("number"),height:n("number"),align:n("string"),inset:n("boolean"),size:n("number"),hideUnder:n("number"),fillMode:n("string")}),MSPanel.Callback=Ember.Model.extend({id:n("number"),label:n("string"),name:n("string"),content:n("string",{defaultValue:"function(event){\n  var api = event.target;\n}"})}),MSPanel.ButtonStyle=Ember.Model.extend({id:n("number"),className:n("string"),normal:n("string"),hover:n("string"),active:n("string"),style:n("string",{defaultValue:"ms-btn-box"}),size:n("string",{defaultValue:"ms-btn-n"})}),i=function(n){var t=B64.decode(n);return t.slice(0,t.lastIndexOf("}")+1)},MSPanel.data=__MSP_DATA?JSON.parse(i(__MSP_DATA)):{meta:{}},MSPanel.PSData=__MSP_PRESET_STYLE?JSON.parse(i(__MSP_PRESET_STYLE)):{meta:{}},MSPanel.PEData=__MSP_PRESET_EFFECT?JSON.parse(i(__MSP_PRESET_EFFECT)):{meta:{}},MSPanel.PBData=__MSP_PRESET_BUTTON?JSON.parse(i(__MSP_PRESET_BUTTON)):{meta:{}},MSPanel.Settings.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Slide.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Layer.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Style.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Effect.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Control.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Callback.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.PresetStyle.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PSData}),MSPanel.PresetEffect.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PEData}),MSPanel.ButtonStyle.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PBData})}(),MSPanel.SliderTemplates=[{name:"Custom Template",value:"custom",className:"",img:__MSP_PATH+"images/templates/custom.gif",controls:null},{name:"3D Flow Carousel",value:"3d-flow-carousel",className:"ms-caro3d-template",img:__MSP_PATH+"images/templates/3d-flow-carousel.png",settings:{space:0,loop:!0,trView:"flow",layout:"partialview",dir:"h",wheel:!1},controls:null},{name:"3D Wave Carousel",value:"3d-wave-carousel",className:"ms-caro3d-template",img:__MSP_PATH+"images/templates/3d-wave-carousel.png",settings:{space:0,loop:!0,trView:"flow",layout:"partialview",dir:"h",wheel:!1},controls:null},{name:"Image Gallery with Thumbs",value:"image-gallery",className:"ms-gallery-template",img:__MSP_PATH+"images/templates/image-gallery.png",settings:{space:0,trView:"basic",skin:"ms-skin-black-2 round-skin"},controls:null,disableControls:!0},{name:"Slider with Bottom Aligned Thumbs",value:"slider-horizontal-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-bottom-thumbs.png",settings:{trView:"scale",space:0},controls:{arrows:{},scrollbar:{dir:"h"},thumblist:{autohide:!1,dir:"h",arrows:!1,align:"bottom",width:127,height:137,margin:5,space:5}}},{name:"Slider with Top Aligned Thumbs",value:"slider-top-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-top-thumbs.png",settings:{trView:"scale",space:0},controls:{arrows:{},scrollbar:{dir:"h"},thumblist:{autohide:!1,dir:"h",arrows:!1,align:"top",width:127,height:137,margin:5,space:5}}},{name:"Slider with Right Aligned Thumbs",value:"slider-vertical-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-right-thumbs.png",settings:null,controls:{arrows:{},scrollbar:{dir:"v"},thumblist:{autohide:!1,dir:"v",arrows:!1,align:"right",width:127,height:137,margin:5,space:5}}},{name:"Slider with Left Aligned Thumbs",value:"slider-left-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-left-thumbs.png",settings:null,controls:{arrows:{},scrollbar:{dir:"v"},thumblist:{autohide:!1,dir:"v",arrows:!1,align:"left",width:127,height:137,margin:5,space:5}}},{name:"Slider with Horizontal Tabs",value:"slider-horizontal-tabs",className:"ms-tabs-template",img:__MSP_PATH+"images/templates/slider-horizontal-tabs.png",settings:null,controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"h",type:"tabs",width:240,height:120,align:"bottom",space:0,margin:-12,hideUnder:400}}},{name:"Slider with Vertical Tabs",value:"slider-vertical-tabs",className:"ms-tabs-template",img:__MSP_PATH+"images/templates/slider-vertical-tabs.png",settings:null,controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"v",type:"tabs",align:"right",margin:-12,space:0,width:229,height:100,hideUnder:550}}},{name:"Partial View Slider V1",value:"partial-1",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-1.png",settings:{space:10,loop:!0,trView:"partialWave",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Partial View Slider V2",value:"partial-2",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-2.png",settings:{space:10,loop:!0,trView:"fadeWave",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Partial View Slider V3",value:"partial-3",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-3.png",settings:{space:10,loop:!0,trView:"fadeFlow",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Slider in Display",value:"display",className:"ms-display-template",img:__MSP_PATH+"images/templates/display.png",settings:{width:507,height:286,speed:20,space:2,trView:"flow",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Display",value:"flat-display",className:"ms-display-template",img:__MSP_PATH+"images/templates/flat-display.png",settings:{width:507,height:286,speed:20,space:2,trView:"flow",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Laptop",value:"laptop",className:"ms-laptop-template",img:__MSP_PATH+"images/templates/laptop.png",settings:{width:492,height:309,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Laptop",value:"flat-laptop",className:"ms-laptop-template",img:__MSP_PATH+"images/templates/flat-laptop.png",settings:{width:492,height:309,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Tablet",value:"tablet",className:"ms-tablet-template",img:__MSP_PATH+"images/templates/tablet.png",settings:{width:400,height:534,speed:20,space:2,trView:"wave",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Tablet",value:"flat-tablet",className:"ms-tablet-template",img:__MSP_PATH+"images/templates/flat-tablet.png",settings:{width:400,height:534,speed:20,space:2,trView:"basic",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Landscape Tablet",value:"tablet-land",className:"ms-tablet-template ms-tablet-land",img:__MSP_PATH+"images/templates/tablet-land.png",settings:{width:632,height:476,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Landscape Tablet",value:"flat-tablet-land",className:"ms-tablet-template ms-tablet-land",img:__MSP_PATH+"images/templates/flat-tablet-land.png",settings:{width:632,height:476,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Smart Phone",value:"phone",className:"ms-phone-template",img:__MSP_PATH+"images/templates/phone.png",settings:{width:258,height:456,speed:20,space:2,trView:"wave",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Smart Phone",value:"flat-phone",className:"ms-phone-template",img:__MSP_PATH+"images/templates/flat-phone.png",settings:{width:258,height:456,speed:20,space:2,trView:"basic",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Landscape Smart Phone",value:"phone-land",className:"ms-phone-template ms-phone-land",img:__MSP_PATH+"images/templates/phone-land.png",settings:{width:456,height:258,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Landscape Smart Phone",value:"flat-phone-land",className:"ms-phone-template ms-phone-land",img:__MSP_PATH+"images/templates/flat-phone-land.png",settings:{width:456,height:258,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},bullets:{autohide:!1}},disableControls:!0},{name:"Vertical Slider",value:"vertical-slider",className:"ms-vertical-template",img:__MSP_PATH+"images/templates/vertical-slider.png",settings:{space:5,dir:"v"},controls:{arrows:{},scrollbar:{dir:"v"},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"v",space:5,margin:5,align:"right"}}},{name:"Staff Carousel V1",value:"staff-1",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-1.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"focus",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V2",value:"staff-2",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-2.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"fadeBasic",layout:"partialview",space:0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V3",value:"staff-3",className:"ms-staff-carousel ms-round",img:__MSP_PATH+"images/templates/staff-3.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"focus",layout:"partialview",space:0,space:35,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V4",value:"staff-4",className:"ms-staff-carousel ms-round",img:__MSP_PATH+"images/templates/staff-4.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"fadeBasic",layout:"partialview",space:0,space:45,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V5",value:"staff-5",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-5.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"wave",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V6",value:"staff-6",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-6.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"flow",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},],MSPanel.Settings.FIXTURES=[{id:1,name:"slider 1"}],MSPanel.Slide.FIXTURES=[],MSPanel.Layer.FIXTURES=[],MSPanel.Style.FIXTURES=[],MSPanel.SlideFrame=Ember.View.extend({classNames:["msp-slideframe"],classNameBindings:["selected:active"],selected:!1,thumb_src:"",showbtnclass:"msp-ico msp-ico-whitehide",template:Ember.Handlebars.compile('<div class="msp-img-cont">{{#if view.hasImg}}<div class="msp-imgselect-preview" {{bind-attr style=view.preview}})"><\/div>{{/if}}<\/div><span class="msp-frame-slideorder">#{{view.order}}<\/span><div class="msp-framehandle"><ul><li><a title="'+__MSP_LAN.ui_001+'" href="#" {{action "hideswitch" target=view}}><span {{bind-attr class=view.showbtnclass}}><\/span><\/a><\/li><li><a title="'+__MSP_LAN.ui_002+'" href="#" {{action "duplicate" target=view}}><span class="msp-ico msp-ico-whiteduplicate"><\/span><\/a><\/li><li><a title="'+__MSP_LAN.ui_003+'" href="#" {{action "remove" target=view}}><span class="msp-ico msp-ico-whiteremove"><\/span><\/a><\/li><\/ul><\/div>'),click:function(){this.get("controller").send("select",this.get("slide"))},onValueChanged:function(){var n=!Ember.isEmpty(this.get("slide.bg"));this.beginPropertyChanges(),this.set("hasImg",n),n&&this.set("preview","background-image:url("+this.get("slide.bgThumb")+");"),this.endPropertyChanges()}.observes("slide.bg").on("didInsertElement"),onSelect:function(){var n=this.get("slide");this.set("selected",n===this.get("controller.currentSlide"))}.observes("controller.currentSlide").on("init"),hideChange:function(){this.get("slide.ishide")?this.set("showbtnclass","msp-ico msp-ico-whitehide msp-ico-whiteshow"):this.set("showbtnclass","msp-ico msp-ico-whitehide")}.observes("slide.ishide").on("init"),order:function(){return this.get("slide.order")+1}.property("slide.order"),actions:{duplicate:function(){this.get("controller").duplicateSlide(this.get("slide"))},hideswitch:function(){this.set("slide.ishide",!this.get("slide.ishide"))},remove:function(){confirm(__MSP_LAN.ui_004)&&this.get("controller").removeSlide(this.get("slide"))}}}),MSPanel.SlideList=Ember.View.extend({tagName:"ul",classNames:["msp-slides"],template:Ember.Handlebars.compile('{{#each item in controller}}<li class="msp-slideframe-item" {{bind-attr data-id=item.id}}>{{view MSPanel.SlideFrame slide=item}}<\/li>{{/each}}<li class="msp-addslide-cont"><div class="msp-addslide" {{action "newSlide"}}><span class="msp-ico msp-ico-grayaddlarge"><\/span><span class="msp-addslide-label">Add Slide<\/span><\/div><\/li>'),didInsertElement:function(){var n=this;this.$().sortable({placeholder:"msp-frames-srtplaceholder",items:">li:not(.msp-addslide-cont)",delay:100,update:function(){n.updateSort()},create:function(){n.updateSort()}})},updateSort:function(){var n={};$(".msp-slideframe-item").each(function(t){n[$(this).data("id")]=t}),this.$().sortable("cancel"),this.get("controller").updateSlidesSort(n)}}),MSPanel.ImgSelect=Ember.View.extend({classNames:["msp-imgselect"],value:"",hasImg:!1,frame:null,template:Ember.Handlebars.compile('<div class="msp-img-cont">{{#if view.hasImg}}<div class="msp-imgselect-preview" {{bind-attr style=view.preview}})"><\/div>{{/if}}<\/div>{{#if view.hasImg}}<button {{action removeImg target="view"}} class="msp-img-btn"><span class="msp-ico msp-ico-grayremove"><\/span><\/button>{{else}}<button {{action addImg target="view"}} class="msp-img-btn"><span class="msp-ico msp-ico-grayadd"><\/span><\/button>{{/if}}'),willDestroyElement:function(){var n=this.get("frame");n&&(n.detach(),n.remove(),n=null,this.set("frame",null))},onValueChanged:function(){this.beginPropertyChanges(),this.set("hasImg",!Ember.isEmpty(this.get("value"))),this.set("preview","background-image:url("+this.get("thumb")+");"),this.endPropertyChanges()}.observes("value").on("didInsertElement"),actions:{removeImg:function(){this.beginPropertyChanges(),this.set("value",undefined),this.set("thumb",undefined),this.endPropertyChanges()},addImg:function(){var t,n;if(typeof wp!="undefined"){if(t=this,n=this.get("frame"),n){n.open();return}n=wp.media.frames.frame=wp.media({title:"Select Image",multiple:!1,frame:"select",library:{type:"image"},button:{text:"Add Image"}});n.on("select",function(){var i=n.state().get("selection").first().toJSON();t.set("thumb",(i.sizes.thumbnail||i.sizes.full).url),t.set("value",i.url)});n.open(),this.set("frame",n)}}}}),MSPanel.Select=Ember.Select.extend({tagName:"div",classNames:["msp-ddlist"],layout:Ember.Handlebars.compile("<select>{{yield}}<\/select>"),value:null,width:100,didInsertElement:function(){var n=this;this.$("select").on("change",function(){var t=n.$("select option:selected");n.set("value",t.attr("value"))}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.URLTarget=MSPanel.Select.extend({onInit:function(){var n=[{lable:__MSP_LAN.ui_005,value:"_self"},{lable:__MSP_LAN.ui_006,value:"_blank"},{lable:__MSP_LAN.ui_007,value:"_parent"},{lable:__MSP_LAN.ui_008,value:"_top"}];this.set("content",n),this.set("optionValuePath","content.value"),this.set("optionLabelPath","content.lable"),this.set("width",200)}.on("init")}),MSPanel.Fillmode=Ember.View.extend({classNames:["msp-fill-dd"],type:"slide",value:"fill",index:1,template:Ember.Handlebars.compile("<select>{{#each item in view.contents}}<option {{bind-attr value=item.value data-imagesrc=item.img}}>{{item.text}}<\/option>{{/each}}<\/select>"),didInsertElement:function(){var t=this,n=!0;this.$("select").ddslick({width:154,onSelected:function(i){n||t.set("value",i.selectedData.value),n=!1}}),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$(".dd-container").ddslick("select",{index:this.get("valuedic")[this.get("value")]})}.observes("value"),onInit:function(){var n,t;this.get("type")==="slide"?(n=[{value:"fill",text:__MSP_LAN.ui_009,img:__MSP_PATH+"images/fill.png"},{value:"fit",text:__MSP_LAN.ui_010,img:__MSP_PATH+"images/fit.png"},{value:"center",text:__MSP_LAN.ui_011,img:__MSP_PATH+"images/center.png"},{value:"stretch",text:__MSP_LAN.ui_012,img:__MSP_PATH+"images/stretch.png"},{value:"tile",text:__MSP_LAN.ui_013,img:__MSP_PATH+"images/tile.png"}],t={fill:0,fit:1,center:2,stretch:3,tile:4}):this.get("type")==="video"&&(n=[{value:"fill",text:__MSP_LAN.ui_009,img:__MSP_PATH+"images/fill.png"},{value:"fit",text:__MSP_LAN.ui_010,img:__MSP_PATH+"images/fit.png"}],t={fill:0,fit:1,none:2}),this.set("contents",n),this.set("valuedic",t)}.on("init")}),MSPanel.AddLayer=Ember.View.extend({classNames:["msp-addlayer"],template:Ember.Handlebars.compile('<button {{action newLayer view.value}} class="msp-add-btn msp-addlayer-btn"><span class="msp-ico msp-ico-whiteadd"><\/span><\/button><div class="msp-addlayer-dd"><select>{{#each item in view.layertypes}}<option {{bind-attr value=item.value data-imagesrc=item.img}}>{{item.lable}}<\/option>{{/each}}<\/select><\/div>'),didInsertElement:function(){var n=this;this.$().find("select").ddslick({width:154,onSelected:function(t){n.set("value",t.selectedData.value)}})},onInit:function(){for(var i=[],t=this.get("controller.layertypes"),n=0,r=t.length;n!==r;n++)i.push({value:t[n].value,lable:t[n].lable,img:__MSP_PATH+"images/layertypes/"+t[n].value+".png"});this.set("layertypes",i)}.on("init")}),MSPanel.AlignBtns=Ember.View.extend({classNames:["msp-align-btns"],target:null,template:Ember.Handlebars.compile('<button title="'+__MSP_LAN.ui_015+'" {{action "alignLayer" "top" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-altop"><\/span><\/button><button title="'+__MSP_LAN.ui_016+'" {{action "alignLayer" "mid" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-almid"><\/span><\/button><button title="'+__MSP_LAN.ui_017+'" {{action "alignLayer" "bot" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-albot"><\/span><\/button><div class="msp-btn-space"><\/div><button title="'+__MSP_LAN.ui_018+'" {{action "alignLayer" "left" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alleft"><\/span><\/button><button title="'+__MSP_LAN.ui_019+'" {{action "alignLayer" "center" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alcenter"><\/span><\/button><button title="'+__MSP_LAN.ui_020+'" {{action "alignLayer" "right" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alright"><\/span><\/button>')}),MSPanel.PositionOrigin=Ember.View.extend({classNames:["msp-origin-control"],layer:null,selectedNode:null,template:Ember.Handlebars.compile('<table><tbody><tr><td title="Top left" class="msp-origin-btn msp-origin-tl" data-origin="tl"><\/td><td title="Top center" class="msp-origin-btn msp-origin-tc" data-origin="tc"><\/td><td title="Top right" class="msp-origin-btn msp-origin-tr" data-origin="tr"><\/td><\/tr><tr><td title="Middle left" class="msp-origin-btn msp-origin-ml" data-origin="ml"><\/td><td title="Middle center" class="msp-origin-btn msp-origin-mc" data-origin="mc"><\/td><td title="Middle right" class="msp-origin-btn msp-origin-mr" data-origin="mr"><\/td><\/tr><tr><td title="Bottom left" class="msp-origin-btn msp-origin-bl" data-origin="bl"><\/td><td title="Bottom center" class="msp-origin-btn msp-origin-bc" data-origin="bc"><\/td><td title="Bottom right" class="msp-origin-btn msp-origin-br" data-origin="br"><\/td><\/tr><\/tbody><\/table>'),didInsertElement:function(){var n=this;this.$(".msp-origin-btn").click(function(){Ember.isEmpty(n.get("layer"))||n.set("layer.origin",$(this).data("origin"))}),this.onValueChanged()},onValueChanged:function(){var n=this.get("selectedNode"),t,i;if(Ember.isEmpty(n)||n.removeClass("msp-origin-btn-selected"),Ember.isEmpty(this.get("layer"))){this.$().addClass("msp-origin-control-disabled");return}this.$().removeClass("msp-origin-control-disabled"),t=this.get("layer.origin"),i=this.$(".msp-origin-"+t).addClass("msp-origin-btn-selected"),this.set("selectedNode",i)}.observes("layer","layer.origin")}),MSPanel.ButtonsList=Ember.View.extend({classNames:["msp-buttons-container"],layer:null,template:Ember.Handlebars.compile('{{#each button in controller.buttonClasses}}<div class="msp-button-container" {{action "selectButton" button target=view}}><div class="msp-button-cell"><span {{bind-attr class=":ms-btn button.style button.size button.className"}}>Button<\/span><\/div><\/div>{{/each}}'),didInsertElement:function(){var n=this;this.onValueChanged()},onValueChanged:function(){var n=this.get("layer.btnClass"),t=this.get("lastSelected");Ember.isEmpty(n)||(n=n.split(" ").pop(),Ember.isEmpty(t)||this.$("."+t).parent().removeClass("active"),this.$("."+n).parent().addClass("active"),this.set("lastSelected",n))}.observes("layer","layer.btnClass"),actions:{selectButton:function(n){this.set("layer.btnClass","ms-btn "+n.get("style")+" "+n.get("size")+" "+n.get("className"))}}}),MSPanel.ActionList=Ember.View.extend({classNames:["msp-action-list"],layer:null,showSlideNum:null,template:Ember.Handlebars.compile('{{#dropdwon-List value=view.layer.action width=180}}<option value="next">'+(__MSP_LAN.ui_021||"Goto next slide")+'<\/option><option value="previous">'+(__MSP_LAN.ui_022||"Goto previous slide")+'<\/option><option value="gotoSlide">'+(__MSP_LAN.ui_022||"Goto slide")+'<\/option><option value="pause">'+(__MSP_LAN.ui_023||"Pause timer")+'<\/option><option value="resume">'+(__MSP_LAN.ui_024||"Resume timer")+'<\/option>{{/dropdwon-List}}{{#if view.showSlideNum}}<div class="msp-form-space-med"><\/div>'+(__MSP_LAN.ui_024||"Slide number : ")+"{{number-input value=view.layer.toSlide}}{{/if}}"),onValueChanged:function(){var n=this.get("layer.action");this.set("showSlideNum",n==="gotoSlide")}.observes("layer","layer.action").on("init")}),MSPanel.SimpleCodeBlock=Ember.View.extend({classNames:["msp-shortcode-box"],template:Ember.Handlebars.compile('<input type="text" readonly {{bind-attr value=view.value}}>'),width:150,didInsertElement:function(){this.$("input").on("click",function(){$(this).select()}).width(this.get("width"))}}),MSPanel.SettingsView=Ember.View.extend({didInsertElement:function(){this.set("controller.mainView",this)}}),MSPanel.SlidesView=Ember.View.extend({didInsertElement:function(){this.set("controller.mainView",this)}}),function(){"use strict";var n=80,t=300;MSPanel.Timeline=Ember.View.extend({classNames:["msp-timeline-cont"],goLockAll:!0,goSoloAll:!0,goHideAll:!0,template:Ember.Handlebars.compile(' <div class="msp-tl-headbar"><div class="msp-tl-controls"><ul><li><a title="'+__MSP_LAN.tl_001+'" href="#" {{action "hideAll" target=view}}><span class="msp-ico msp-ico-blackhide"><\/span><\/a><\/li><li><a title="'+__MSP_LAN.tl_002+'" href="#" {{action "soloAll" target=view}}><span class="msp-ico msp-ico-blackiso"><\/span><\/a><\/li><li><a title="'+__MSP_LAN.tl_003+'" href="#" {{action "lockAll" target=view}}><span class="msp-ico msp-ico-blacklock"><\/span><\/a><\/li><\/ul><div class="msp-tl-current-time">{{view MSPanel.TimelineTime}}<\/div><\/div><div class="msp-tl-timeruler-cont">{{view MSPanel.TimelineRuler timeline=view}}<\/div><\/div><div class="msp-tl-layars-cont">{{view MSPanel.TimelineLayersList timeline=view}}{{view MSPanel.TimelineFrames timeline=view}}<\/div><div id="msp-resize-handle" class="msp-tl-resizehandle">...<\/div>'),didInsertElement:function(){var n=this;this.$("#msp-resize-handle").mousedown(function(t){var r=n.get("controller.slide.timeline_h"),u=t.pageY,i=!0;$(document).mousemove(function(t){if(i){var f=Math.max(100,r+t.pageY-u);n.set("controller.slide.timeline_h",f),n.$(".msp-tl-layars-cont").height(f),n.set("scrlY",0),t.preventDefault()}}).mouseup(function(){i=!1})}),this.onSlideChange()},willDestroyElement:function(){},onSlideChange:function(){this.$(".msp-tl-layars-cont").height(this.get("controller.slide.timeline_h"))}.observes("controller.slide"),actions:{lockAll:function(){var n=this.get("goLockAll");this.get("controller").forEach(function(t){t.set("isLocked",n)}),this.set("goLockAll",!n)},soloAll:function(){var n=this.get("goSoloAll");this.get("controller").forEach(function(t){t.set("isSoloed",n)}),this.set("goSoloAll",!n)},hideAll:function(){var n=this.get("goHideAll");this.get("controller").forEach(function(t){t.set("isHided",n)}),this.set("goHideAll",!n)}}}),MSPanel.TimelineTime=Ember.View.extend({tagName:"span",time:"00:00.00",template:Ember.Handlebars.compile("{{view.time}}"),update:function(){var n=this.get("controller.timelinePos"),t=Math.floor(n/60),i=Math.abs(t*60-Math.floor(n)),r=Math.floor((n-Math.floor(n))*100);this.set("time",(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+"."+(r<10?"0"+r:r))}.observes("controller.timelinePos")}),MSPanel.PreviewSlideBtn=Ember.View.extend({classNames:["msp-preview-slide"],template:Ember.Handlebars.compile('{{#if controller.isPlaying}}<a href="#" {{action "pause"}} class="msp-preview-btn msp-pause-btn"><span class="msp-ico msp-ico-whitepause"><\/span><\/a>{{else}}<a href="#" {{action "enterPreviewMode"}} class="msp-preview-btn msp-play-btn"><span class="msp-ico msp-ico-whiteplay"><\/span><\/a>{{/if}}{{#if controller.isPreviewMode}}<a href="#" {{action "exitPreviewMode"}} class="msp-preview-btn-text msp-exit-preview">'+__MSP_LAN.tl_004+'<\/a>{{else}}<a href="#" {{action "enterPreviewMode"}} class="msp-preview-btn-text">'+__MSP_LAN.tl_005+"<\/a>{{/if}}")}),MSPanel.TimelineLayersList=Ember.View.extend({classNames:["msp-tl-layers-list"],template:Ember.Handlebars.compile('<ul>{{#each layer in controller}}<li class="msp-slidelayer-item" {{bind-attr data-id=layer.id}}> {{view MSPanel.LayerRow layer=layer}} <\/li>{{/each}}<\/ul><div class="msp-layer-botspace"><\/div>'),didInsertElement:function(){var t=this,n=this.$(),i=function(i){var f=t.$().offset(),e=1,o=5,r=n,u=r[0].scrollTop;f.top+r[0].offsetHeight-i.pageY<e?u=r[0].scrollTop+o:i.pageY-f.top<e&&(u=r[0].scrollTop-o),t.set("timeline.scrlY",u)},u=this.$(">ul").sortable({placeholder:"msp-layers-srtplaceholder",helper:"clone",axis:"y",zIndex:1002,opacity:.6,delay:100,start:function(n,t){t.item.show(),t.helper.bind("mousemove",i)},end:function(n,t){t.helper.unbind("mousemove",i)},update:function(){var n={},i=$(this).find(".msp-slidelayer-item"),r=i.length,u=$(this);i.each(function(t){n[$(this).data("id")]=r-t}),u.sortable("cancel"),t.get("controller").updateLayersSort(n)}}),r=function(i){var r=n[0].scrollTop,u=i.deltaY*30;r===0&&u>0||u<0&&r>=n[0].scrollHeight-n[0].clientHeight-10||(t.set("timeline.scrlY",r-u),i.preventDefault())};n.mouseenter(function(){n.bind("mousewheel",r)}).mouseleave(function(){n.unbind("mousewheel",r)}),this.set("soratableList",u)},onPlayingMode:function(){this.get("controller.isPreviewMode")?this.get("soratableList").sortable("disable"):this.get("soratableList").sortable("enable")}.observes("controller.isPreviewMode"),onScroll:function(){var n=this.get("timeline.scrlY");this.$()[0].scrollTop=parseInt(n)}.observes("timeline.scrlY"),willDestroyElement:function(){this.set("soratableList",null)}}),MSPanel.LayerRow=Ember.View.extend({classNames:["msp-layer-row"],classNameBindings:["selected:active"],selected:!1,isEditing:!1,template:Ember.Handlebars.compile('<ul><li><a href="#" title="'+__MSP_LAN.tl_006+'" {{action "toggleHide" target=view bubbles=false}}><span {{bind-attr class=view.hideClass}}><\/span><\/a><\/li><li><a href="#" title="'+__MSP_LAN.tl_007+'" {{action "toggleSolo" target=view bubbles=false}}><span {{bind-attr class=view.soloClass}}><\/span><\/a><\/li><li><a href="#" title="'+__MSP_LAN.tl_008+'" {{action "toggleLock" target=view bubbles=false}}><span {{bind-attr class=view.lockClass}}><\/span><\/a><\/li><\/ul><div class="msp-layer-label"><img {{bind-attr src=view.layerImg}}>{{#if view.isEditing}}{{view MSPanel.RenameLayer class="msp-lt-layer-rename" value=layer.name isEditingBinding="view.isEditing"}}{{else}}<span {{action "renameLayer" on="doubleClick" target=view}} class="msp-layer-labeltext">{{layer.name}}<\/span>{{/if}}<\/div><div class="msp-layer-controls"><a href="#" title="Duplicate" {{action "duplicateLayer" target=view bubbles=false}}><span class="msp-ico msp-ico-grayduplicate"><\/span><\/a><a href="#" title="Remove" {{action "removeLayer" target=view bubbles=false}}><span class="msp-ico msp-ico-grayremove"><\/span><\/a><\/div>'),mouseDown:function(){this.get("controller.isPreviewMode")||this.get("controller").send("selectLayer",this.get("layer"))},onInit:function(){this.set("layerImg",__MSP_PATH+"images/layertypes/"+this.get("layer.type")+".png"),this.updateLayerstate()}.on("init"),onSelect:function(){if(this.get("controller.currentLayer")===null){this.get("selected")&&this.set("selected",!1);return}var n=this.get("layer");this.set("selected",n.get("id")===this.get("controller.currentLayer.id"))}.observes("controller.currentLayer").on("init"),updateLayerstate:function(){this.set("hideClass","msp-ico "+(this.get("layer.isHided")?"msp-ico-blackhide":"msp-ico-graypoint")),this.set("soloClass","msp-ico "+(this.get("layer.isSoloed")?"msp-ico-blackiso":"msp-ico-graypoint")),this.set("lockClass","msp-ico "+(this.get("layer.isLocked")?"msp-ico-blacklock":"msp-ico-graypoint"))}.observes("layer.isHided","layer.isLocked","layer.isSoloed"),actions:{duplicateLayer:function(){this.get("controller.isPreviewMode")||this.get("controller").duplicateLayer(this.get("layer"))},removeLayer:function(){this.get("controller.isPreviewMode")||confirm(__MSP_LAN.tl_009)&&this.get("controller").removeLayer(this.get("layer"))},renameLayer:function(){this.set("isEditing",!0)},toggleLock:function(){this.set("layer.isLocked",!this.get("layer.isLocked"))},toggleSolo:function(){this.set("layer.isSoloed",!this.get("layer.isSoloed"))},toggleHide:function(){this.set("layer.isHided",!this.get("layer.isHided"))}}}),MSPanel.RenameLayer=Ember.TextField.extend({didInsertElement:function(){this.$().focus()},focusOut:function(){this.set("isEditing",!1),Ember.isEmpty(this.get("value"))&&this.set("value","layer")},insertNewline:function(){this.set("isEditing",!1),Ember.isEmpty(this.get("value"))&&this.set("value","layer")}}),MSPanel.TimelineRuler=Ember.View.extend({classNames:["msp-tl-ruler"],attributeBindings:["style"],template:Ember.Handlebars.compile('<div id="ruler-frame-indicator" class="msp-tl-ruler-frameindicator"><\/div><div id="ruler-delay-indicator" class="msp-tl-delayindicator"><\/div>{{#each time in view.timeList}}<span class="mps-tl-lable">{{time}}<\/span>{{/each}}'),setup:function(){for(var u=t+1,f=[],r,i=0;i!==u;i++)f.push(i+"s");r=u*n,this.set("timeline.rulerWidth",r),this.set("style","width:"+r+"px"),this.set("timeList",f)}.on("init"),didInsertElement:function(){var t=this,i=this.$("#ruler-frame-indicator").slider({slide:function(i,r){var u=t.get("controller.tweenTimeline");t.get("controller").send("pause"),u.position(Math.min(.998,r.value/(300*n))*u.duration)},max:300*n});this.get("controller.isPreviewMode")||i.css("display","none")},onPlaying:function(){var i=this.get("controller.isPreviewMode"),t=this.$("#ruler-frame-indicator");i?t.css("width",this.get("controller.tweenTimeline").duration*n).css("display",""):t.css("display","none").slider("option","value",0)}.observes("controller.isPreviewMode"),updateFrameIndicator:function(){this.$("#ruler-frame-indicator").slider("option","value",this.get("controller.timelinePos")*300*n/this.get("controller.tweenTimeline").duration),this.onScroll()}.observes("controller.timelinePos"),onScroll:function(){var n=this.get("timeline.scrlX");this.$().parent()[0].scrollLeft=parseInt(n)}.observes("timeline.scrlX"),updateDelayIndicator:function(){this.$("#ruler-delay-indicator")[0].style.left=this.get("controller.slide.duration")*n+20+"px"}.observes("controller.slide.duration").on("didInsertElement")}),MSPanel.TimelineFrames=Ember.View.extend({classNames:["msp-tl-frames-cont"],template:Ember.Handlebars.compile('<ul>{{#each layer in controller}}<li> {{view MSPanel.FramesRow layer=layer}} <\/li>{{/each}}<\/ul><div id="delay-indicator" class="msp-tl-delayindicator"><\/div><div id="frame-indicator" class="msp-tl-frameindicator"><\/div>'),didInsertElement:function(){this.$().jScrollPane({hideFocus:!0,forceReinit:!0}),$(window).resize(function(){t.reinitialise()});var t=this.$().data("jsp"),n=this;this.$().bind("jsp-scroll-y",function(t,i){n.set("timeline.scrlY",i)}).bind("jsp-scroll-x",function(t,i){n.set("timeline.scrlX",i)})},updatejsp:function(){Ember.run.scheduleOnce("afterRender",this,this.applyScroll)}.observes("controller","controller.@each","timeline.rulerWidth","controller.slide.timeline_h"),applyScroll:function(){var n=this.$().data("jsp");n.reinitialise()},scrollTo:function(){this.$().data("jsp").scrollToY(this.get("timeline.scrlY"))}.observes("timeline.scrlY"),updateDelayIndicator:function(){this.$("#delay-indicator")[0].style.left=this.get("controller.slide.duration")*n+20+"px"}.observes("controller.slide.duration").on("didInsertElement"),updateFrameIndicator:function(){this.$("#frame-indicator")[0].style.left=this.get("controller.timelinePos")*n+20+"px"}.observes("controller.timelinePos"),onPlaying:function(){this.get("controller.isPreviewMode")?this.$("#frame-indicator").css("display",""):this.$("#frame-indicator").css("display","none")}.observes("controller.isPreviewMode").on("didInsertElement")}),MSPanel.FramesRow=Ember.View.extend({classNames:["msp-frames-row"],attributeBindings:["style"],classNameBindings:["selected:active"],selected:!1,rangeSlider:null,didInsertElement:function(){var t=new averta.rangeSlider,u=this.get("parentView"),i=this;this.$().append(t.$element.addClass("msp-timeline-range"));var r=function(n){n.offset().left<u.$().offset().left+10&&n.css("left",u.$().offset().left+10)},f=t.addRange("startDelay",this.get("layer.showDelay")*n,"msp-range msp-range-delay",function(t){return i.set("layer.showDelay",t.value/n),r(t.tt),__MSP_LAN.tl_010+" "+Math.round(t.value/n*100)/100+"s"}),e=t.addRange("showDuration",this.get("layer.showDuration")*n,"msp-range msp-range-show",function(t){return i.set("layer.showDuration",t.value/n),r(t.tt),__MSP_LAN.tl_011+" "+Math.round(t.value/n*100)/100+"s"}),o=t.addRange("hideDelay",this.get("layer.hideDelay")*n,"msp-range msp-range-wating",function(t){return i.set("layer.hideDelay",t.value/n),r(t.tt),__MSP_LAN.tl_012+" "+Math.round(t.value/n*100)/100+"s"}),s=t.addRange("hideDuration",this.get("layer.hideDuration")*n,"msp-range msp-range-hide",function(t){return i.set("layer.hideDuration",t.value/n),r(t.tt),__MSP_LAN.tl_013+" "+Math.round(t.value/n*100)/100+"s"});this.set("hideDurationRange",s),this.set("hideDelayRange",o),this.set("showDurationRange",e),this.set("showDelayRange",f),this.set("rangeSlider",t),this.onHideStateChange()},onValuesChanged:function(){var t=this.get("rangeSlider");t.setValue(this.get("showDelayRange"),this.get("layer.showDelay")*n),t.setValue(this.get("showDurationRange"),this.get("layer.showDuration")*n),this.get("layer.useHide")&&(t.setValue(this.get("hideDelayRange"),this.get("layer.hideDelay")*n),t.setValue(this.get("hideDurationRange"),this.get("layer.hideDuration")*n))}.observes("layer.showDelay","layer.showDuration","layer.hideDelay","layer.hideDuration"),onHideStateChange:function(){var r=this.get("layer.useHide"),t=this.get("hideDurationRange"),i=this.get("hideDelayRange"),n=this.get("rangeSlider");r?(n.showRange(i),n.showRange(t)):(n.hideRange(i),n.hideRange(t))}.observes("layer.useHide"),onPlayingMode:function(){var t=this.get("controller.isPreviewMode"),n=this.get("rangeSlider");t?n.disable():n.enable()}.observes("controller.isPreviewMode"),onSelect:function(){if(this.get("controller.currentLayer")===null){this.get("selected")&&this.set("selected",!1);return}var n=this.get("layer");this.set("selected",n.get("id")===this.get("controller.currentLayer.id"))}.observes("controller.currentLayer").on("init"),willDestroyElement:function(){this.get("rangeSlider").remove()},update:function(){var n=this.get("parentView.timeline.rulerWidth");this.set("style","width:"+n+"px")}.observes("parentView.timeline.rulerWidth").on("init")})}(),MSPanel.StageArea=Ember.View.extend({classNames:["msp-stage-area"],selectedLayer:null,zoom:100,template:Ember.Handlebars.compile('<div class="msp-metabox-row"><div class="msp-stage-top-toolbar"><label>'+__MSP_LAN.sv_001+' <\/label> {{view MSPanel.AlignBtns target=view}}<span class="msp-form-space"><\/span><label>'+__MSP_LAN.sv_002+' <\/label> {{switch-box value=sliderSettings.snapping}}<span class="msp-form-space"><\/span><label>'+(__MSP_LAN.sv_010||"Layer position origin : ")+' <\/label> {{view MSPanel.PositionOrigin layer=view.layer}}<span class="msp-form-space"><\/span><label>'+__MSP_LAN.sv_003+' <\/label> {{number-input value=view.zoom}} %<\/div><\/div><hr class="msp-metabox-hr" style="margin-top:10px;">{{view MSPanel.Stage}}{{#if noticeMsg}}<div class="msp-stage-msg"><span class="msp-ico msp-ico-notice"><\/span>{{{noticeMsg}}}<\/div>{{/if}}'),onSelectedLayerChanged:function(){this.set("layer",this.get("selectedLayer.layer"))}.observes("selectedLayer"),actions:{alignLayer:function(n){this.get("selectedLayer")&&this.get("selectedLayer").align(n)}}}),MSPanel.Stage=Ember.View.extend({classNames:["msp-slide-stage"],attributeBindings:["style"],selectedLayer:null,overSoloPlane:0,template:Ember.Handlebars.compile('<div id="stage-bg" class="msp-stage-bg"><\/div><div {{bind-attr class=":msp-stage-pattern :ms-pattern controller.slide.pattern"}}><\/div><div id="snapbox" class="msp-stage-snapbox"><\/div><div id="solo-plane" class="msp-solo-plane"><\/div>{{#each layer in controller }}{{view MSPanel.StageLayer layer=layer}}{{/each}}'),resize:function(){var n=this.get("controller.sliderSettings.width"),t=this.get("controller.sliderSettings.height");this.set("width",n),this.set("height",t),this.$().css({width:n,height:t,zoom:this.get("parentView.zoom")+"%"})}.observes("controller.sliderSettings.width","controller.sliderSettings.height","parentView.zoom").on("didInsertElement"),didInsertElement:function(){var t,n,i;$(document).on("keydown",{that:this},this.moveLayer);t=this.$("#stage-bg"),n=$("<img/>"),n.css("visibelity","hidden").each($.jqLoadFix),i=new MSAligner(this.get("controller.slide.fillMode"),t,n),this.set("bgAligner",i),this.set("bgImg",n),this.set("soloPlane",this.$("#solo-plane").css("display","none")),this.onBGChange()},onBGColorChange:function(){var n=this.get("controller.slide.bgColor");Ember.isEmpty(n)?this.$("#stage-bg").css("background-color",""):this.$("#stage-bg").css("background-color",n)}.observes("controller.slide.bgColor").on("didInsertElement"),onBGChange:function(){var i=this.get("bgAligner"),t,n,r;i&&i.reset(),t=this.get("controller.slide.bg"),n=this.get("bgImg"),Ember.isEmpty(t)?n.detach():(r=this,n.appendTo(this.$("#stage-bg")),n.preloadImg(t,function(n){r._onBGLoad(n)}),n.attr("src",t))}.observes("controller.slide.bg"),_onBGLoad:function(n){var t=this.get("bgAligner");t&&(t.init(n.width,n.height),t.align(),this.get("bgImg").css("visibelity",""))},mouseDown:function(){this.get("controller").send("clearSelect"),this.set("selectedLayer",null)},onFillModeChanged:function(){var n=this.get("bgAligner");n.changeType(this.get("controller.slide.fillMode"))}.observes("controller.slide.fillMode"),moveLayer:function(n){var t=$(document.activeElement),r,i;t.length!==0&&(t.is("input")||t.is("textarea"))||(r=n.data.that,i=r.get("selectedLayer"),keyCode=n.which,i&&keyCode>=37&&keyCode<=40&&(i.move(keyCode,n.shiftKey),n.preventDefault()))},onSelectedLayerChanged:function(){this.set("parentView.selectedLayer",this.get("selectedLayer"))}.observes("selectedLayer"),showSoloPlane:function(){var n=this;setTimeout(function(){n.get("soloPlane").css("display","")},1),this.incrementProperty("overSoloPlane")},hideSoloPlane:function(){var n=this.get("overSoloPlane");n=Math.max(0,n-1),this.set("overSoloPlane",n),n===0&&this.get("soloPlane").css("display","none")},previewMode:function(){var n=this.get("controller.isPreviewMode");n&&this.get("overSoloPlane")>0?this.get("soloPlane").css("display","none"):!n&&this.get("overSoloPlane")>0&&this.get("soloPlane").css("display","")}.observes("controller.isPreviewMode"),willDestroyElement:function(){$(document).off("keydown",this.moveLayer),this.set("bgAligner",null)}}),MSPanel.TextLayerTemplate="<div {{bind-attr style=view.layerStyle}}>{{{view.layer.content}}}<\/div>",MSPanel.ButtonLayerTemplate='<div {{bind-attr style=view.layerStyle class=":ms-btn layer.btnClass"}}>{{{view.layer.content}}}<\/div>',MSPanel.dynamicTags&&(MSPanel.TextLayerTemplate="<div {{bind-attr style=view.layerStyle}}>{{#if view.layer.dynamicContent}}{{{view.layer.dynamicContent}}}{{else}}{{{view.layer.content}}}{{/if}}<\/div>"),MSPanel.ImageLayerTemplate='{{#if view.hasImg}}<img {{bind-attr src=view.layer.img}}>{{else}}<img src="'+__MSP_PATH+'images/image-layer.png">{{/if}}',MSPanel.VideoLayerTemplate='<div {{bind-attr style=view.layerStyle}} class="msp-stage-videolayer">{{#if view.layer.hasCover}}<img {{bind-attr src=view.layer.coverImg}}>{{/if}}<img class="msp-stage-videoicon" src="'+__MSP_PATH+'images/video-layer.png"><\/div>',MSPanel.HotspotLayerTemplate='<div class="msp-stage-hotspot"><\/div>',MSPanel.StageLayer=Ember.View.extend({classNames:["msp-stage-layer"],classNameBindings:["selected:active"],attributeBindings:["style"],hasImg:!1,lastStyle:{},onInit:function(){switch(this.get("layer.type")){case"text":this.set("template",Ember.Handlebars.compile(MSPanel.TextLayerTemplate));break;case"image":this.set("template",Ember.Handlebars.compile(MSPanel.ImageLayerTemplate));break;case"video":this.set("template",Ember.Handlebars.compile(MSPanel.VideoLayerTemplate)),Ember.isEmpty(this.get("layer.width"))&&this.set("layer.width",300),Ember.isEmpty(this.get("layer.height"))&&this.set("layer.height",150);break;case"hotspot":this.set("template",Ember.Handlebars.compile(MSPanel.HotspotLayerTemplate));break;case"button":this.set("template",Ember.Handlebars.compile(MSPanel.ButtonLayerTemplate))}this.set("layer.stageLayer",this)}.on("init"),checkImageLayerPath:function(){var n=!Ember.isEmpty(this.get("layer.img"));this.set("hasImg",n),Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent)}.observes("layer.img").on("didInsertElement"),didInsertElement:function(){var t=this,n;this.$().draggable({snap:this.get("controller.sliderSettings.snapping")?".msp-stage-layer, .msp-stage-snapbox":!1,snapTolerance:8,drag:function(n,i){t.updateLayerPostion(i.position.left,i.position.top)}}),this.onPlayingMode(),this.onSoloed(),this.updateLayerStyle(this.get("layer.styleModel").toJSON()),n=this.get("layer.styleModel.custom"),Ember.isEmpty(n)||this.$().attr("style",this.$().attr("style")+";"+n)},afterRenderEvent:function(){if(this.get("layer.type")!=="image"||Ember.isEmpty(this.get("layer.img")))this.repositionLayer();else{var n=this;this.$("img").one("load",function(){n.repositionLayer()}).each($.jqLoadFix)}},updateZIndex:function(){this.get("layer.isSoloed")?this.$().css("z-index",this.get("layer.order")+501):this.$().css("z-index",this.get("layer.order"))}.observes("layer.order").on("didInsertElement"),showAndHide:function(){this.get("layer.isHided")?this.$().css("display","none"):this.$().css("display","")}.observes("layer.isHided"),onPlayingMode:function(){this.get("controller.isPreviewMode")||this.get("layer.isLocked")?this.$().draggable("disable"):this.$().draggable("enable")}.observes("controller.isPreviewMode","layer.isLocked"),onSoloed:function(){this.get("layer.isSoloed")?this.get("parentView").showSoloPlane():this.get("parentView").hideSoloPlane(),this.updateZIndex()}.observes("layer.isSoloed").on("didInsertElement"),updateLayerPostion:function(n,t){this.beginPropertyChanges(),n=n||this.$().position().left,t=t||this.$().position().top;var i=this.get("layer.origin"),r=this.get("hasImg")?Math.max(this.$().outerWidth(),this.$("img").width()):this.$().outerWidth(),u=this.get("hasImg")?Math.max(this.$().outerHeight(),this.$("img").height()):this.$().outerHeight();switch(i.charAt(0)){case"t":this.set("layer.offsetY",t);break;case"m":this.set("layer.offsetY",t-(this.get("parentView.height")-u)/2);break;case"b":this.set("layer.offsetY",this.get("parentView.height")-u-t)}switch(i.charAt(1)){case"l":this.set("layer.offsetX",n);break;case"c":this.set("layer.offsetX",n-(this.get("parentView.width")-r)/2);break;case"r":this.set("layer.offsetX",this.get("parentView.width")-r-n)}this.set("intranlChange",!0),this.endPropertyChanges()},repositionLayer:function(){if(this.get("intranlChange")){this.set("intranlChange",!1);return}var i=this.get("layer.origin"),n=this.get("layer.offsetX"),t=this.get("layer.offsetY"),r=this.get("hasImg")?Math.max(this.$().outerWidth(),this.$("img").width()):this.$().outerWidth(),u=this.get("hasImg")?Math.max(this.$().outerHeight(),this.$("img").height()):this.$().outerHeight();switch(i.charAt(0)){case"t":this.$().css("top",t);break;case"m":this.$().css("top",t+(this.get("parentView.height")-u)/2);break;case"b":this.$().css("top",this.get("parentView.height")-u-t)}switch(i.charAt(1)){case"l":this.$().css("left",n);break;case"c":this.$().css("left",n+(this.get("parentView.width")-r)/2);break;case"r":this.$().css("left",this.get("parentView.width")-r-n)}}.observes("layer.offsetX","layer.offsetY"),onOriginChange:function(){this.updateLayerPostion()}.observes("layer.origin"),onResize:function(){var n="";this.get("layer.width")!=null&&(n+="width:"+this.get("layer.width")+"px;"),this.get("layer.height")!=null&&(n+="height:"+this.get("layer.height")+"px;"),this.set("layerStyle",n)}.observes("layer.width","layer.height").on("didInsertElement"),snappingStateChange:function(){this.$().draggable("option","snap",this.get("controller.sliderSettings.snapping")?".msp-stage-layer, .msp-stage-snapbox":!1)}.observes("controller.sliderSettings.snapping"),onSelectedLayerChanged:function(){if(this.get("controller.currentLayer")===null||this.get("layer.isLocked")){this.get("selected")&&this.set("selected",!1),this.set("parentView.selectedLayer",null);return}var n=this.get("layer.id")===this.get("controller.currentLayer.id");this.set("selected",n),n&&this.set("parentView.selectedLayer",this)}.observes("controller.currentLayer","layer.isLocked"),mouseDown:function(){if(!this.get("controller.isPreviewMode")&&!this.get("layer.isLocked"))return this.get("controller").send("selectLayer",this.get("layer")),!1},move:function(n,t){if(!this.get("layer.isHided")&&!this.get("layer.isLocked")){var i=t?10:1;switch(n){case 37:this.$().css("left","-="+i);break;case 38:this.$().css("top","-="+i);break;case 39:this.$().css("left","+="+i);break;case 40:this.$().css("top","+="+i)}this.updateLayerPostion()}},align:function(n){if(!this.get("layer.isHided")&&!this.get("layer.isLocked")){switch(n){case"top":this.$().css("top",0);break;case"mid":this.$().css("top",(this.get("parentView.height")-this.$().outerHeight())/2);break;case"bot":this.$().css("top",this.get("parentView.height")-this.$().outerHeight());break;case"left":this.$().css("left",0);break;case"center":this.$().css("left",(this.get("parentView.width")-this.$().outerWidth())/2);break;case"right":this.$().css("left",this.get("parentView.width")-this.$().outerWidth())}this.updateLayerPostion()}},reset:function(n){n.removeTween(this.get("showTween")),this.set("showTween",null),this.get("layer.useHide")&&(n.removeTween(this.get("hideTween")),this.set("hideTween",null)),this.$().css(window._jcsspfx+"Transform","").css("opacity",1)},registerTween:function(n){var e=this.get("layer.showTransform"),i=Number(this.get("layer.showDelay")),r=Number(this.get("layer.showDuration")),a=this,u=this.get("layer.showOrigin"),t=this.$(),o,f;if(t.css(window._jcsspfx+"Transform",e),this.get("layer.showFade")&&t.css("opacity",0),o=JTween.resetTransform(e),f=new JTween(t[0],r,{transform:o,opacity:1},{ease:window.convertEaseName(this.get("layer.showEase"))}),n.addTween(i,f),n.addCallback(i,this.updateOrigin,[t,u],this.updateOrigin,[t,u]),this.set("showTween",f),this.get("layer.useHide")){var s=Number(this.get("layer.hideDelay")),c=Number(this.get("layer.hideDuration")),l=this.get("layer.hideOrigin"),h=new JTween(t[0],c,{transform:this.get("layer.hideTransform"),opacity:this.get("layer.hideFade")?0:1},{ease:window.convertEaseName(this.get("layer.hideEase"))});n.addTween(i+r+s,h),n.addCallback(i+r+s,this.updateOrigin,[t,l],this.updateOrigin,[t,u]),this.set("hideTween",h)}},updateOrigin:function(n,t){n[0].style[window._jcsspfx+"TransformOrigin"]=t},updateLayerStyle:function(n){var t,i;for(t in n)n[t]==null&&delete n[t];if(!Ember.isEmpty(this.get("lastStyle"))){i=this.get("lastStyle");for(t in i)this.$().css(t,"")}this.set("lastStyle",jQuery.extend({},n)),this.$().css(n)},willDestroyElement:function(){this.get("layer.isSoloed")&&this.get("parentView").hideSoloPlane()}}),MSPanel.StyleEditor=Ember.View.extend({classNames:["mps-style-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.StylePreview layer=view.layer}}<div class="msp-section-content">{{partial "style-properties"}}<\/div><div class="msp-applystyle-cont"><button {{action "applyStyle"}} class="msp-blue-btn msp-applystyle">'+__MSP_LAN.se_001+'<\/button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+__MSP_LAN.se_002+"<\/button><\/div><\/div>{{view MSPanel.StyleList}}"),didInsertElement:function(){var n=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:550,title:__MSP_LAN.se_006||"Style Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){n.get("controller.parent").closeStyleEditor(),n.get("controller").send("cancel")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(n){var t=n.data.ref;t.$().dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}}),STAGE_WIDTH=780,STAGE_HEIGHT=200,MSPanel.StylePreview=Ember.View.extend({classNames:["msp-section","msp-style-preview"],template:Ember.Handlebars.compile('<div class="msp-style-preview-cont"><div class="msp-style-sample" id="sample">Sample Text<\/div><div id="bgToggle" class="bgToggle"><\/div><\/div>'),didInsertElement:function(){var t=this.$("#sample"),n;this.set("sample",t),this.update(),n=this,this.$("#bgToggle").click(function(){var t=$(this);t.data("isBlack")?(n.$().css("background-color","white"),t.css("background-color","#222"),t.data("isBlack",!1)):(t.data("isBlack",!0),n.$().css("background-color","#222"),t.css("background-color","white"))}).css("background-color","#222")},alignCenter:function(){var n=this.get("sample");n.css("left",(STAGE_WIDTH-n.outerWidth())/2).css("top",(STAGE_HEIGHT-n.outerHeight())/2)},update:function(){this.get("sample").attr("style",this.get("controller.draftStyleText")),this.alignCenter()}.observes("controller.draftStyleText")}),MSPanel.StyleList=Ember.View.extend({classNames:["msp-section msp-style-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+__MSP_LAN.se_003+'<\/span><\/div><div class="msp-section-content"><div class="msp-style-list-cont">{{#each style in presetStyles}}{{view MSPanel.StyleRow style=style}}{{/each}}<\/div><\/div>')}),MSPanel.StyleRow=Ember.View.extend({classNames:["msp-style-row"],classNameBindings:["selected:active"],style:null,selected:!1,template:Ember.Handlebars.compile('<span class="msp-style-name">{{style.name}}<\/span><a {{action "removeStyle" style target=view bubbles=false}} class="msp-style-remove"><span class="msp-ico msp-ico-grayremove"><\/span><\/a>'),click:function(){this.set("controller.currentStyle",this.get("style")),this.get("controller").updateDraft(this.get("style"))},onSelectChanged:function(){this.get("style")===this.get("controller.currentStyle")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentStyle").on("init"),actions:{removeStyle:function(n){confirm(__MSP_LAN.se_004.jfmt(n.get("name")))&&this.get("controller").send("removeStyle",n)}}}),MSPanel.EffectEditor=Ember.View.extend({classNames:["mps-effect-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.EffectPreview layer=view.layer}}<div class="msp-section-content">{{partial "effect-properties"}}<\/div><div class="msp-applyeffect-cont"><button {{action "applyEffect"}} class="msp-blue-btn msp-applyeffect">'+__MSP_LAN.ee_002+'<\/button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+__MSP_LAN.ee_003+"<\/button><\/div><\/div>{{view MSPanel.EffectList}}"),didInsertElement:function(){var n=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:550,title:__MSP_LAN.ee_006||"Transition Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){n.get("controller.parent").closeEffectEditor(),n.get("controller").send("cancel")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(n){var t=n.data.ref;t.$().dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}}),EFF_STAGE_WIDTH=780,EFF_STAGE_HEIGHT=265,MSPanel.EffectPreview=Ember.View.extend({classNames:["msp-section","msp-effect-preview"],isPlaying:!1,isPlayingMode:!1,template:Ember.Handlebars.compile('<div class="msp-effect-preview-cont"><div class="msp-effect-sample" id="sample"><\/div><div class="msp-effect-guide" id="guide"><\/div><div class="msp-preview-controls">{{#if view.isPlaying}}<a {{action "pause" target=view}} class="msp-effect-review-btn msp-preview-btn msp-pause-btn"><span class="msp-ico msp-ico-whitepause"><\/span><\/a>{{else}}<a {{action "play" target=view}} class="msp-effect-review-btn msp-preview-btn msp-play-btn"><span class="msp-ico msp-ico-whiteplay"><\/span><\/a>{{/if}}<div class="msp-effect-timeline-slider msp-ui-slider" id="timeline-slider"><\/div><\/div><\/div>'),didInsertElement:function(){var i=this.$("#sample"),r=this.$("#guide"),t=this.$("#timeline-slider").slider(),n;this.set("sample",i),this.set("guide",r),this.set("timelineSlider",t),n=this,t.on("slide",function(t,i){var r=n.get("timeline");n.send("pause"),r.position(Math.min(.998,i.value/100)*r.duration)}).css("display","none"),this.alignCenter(),this.update(),this.set("controller.preview",this)},willDestroyElement:function(){this.set("controller.preview",null),this.send("pause"),this.send("exitPlaying"),this.get("timelineSlider").remove()},alignCenter:function(){var n=this.get("sample"),t=this.get("guide");n.css("left",(EFF_STAGE_WIDTH-n.outerWidth())/2).css("top",(EFF_STAGE_HEIGHT-n.outerHeight())/2),t.css("left",(EFF_STAGE_WIDTH-t.outerWidth())/2).css("top",(EFF_STAGE_HEIGHT-t.outerHeight())/2)},update:function(){this.get("isPlayingMode")&&this.send("exitPlaying");var t=this.get("guide")[0],r=this.get("sample")[0],n=this.get("controller.origin"),u="perspective(2000px) "+this.get("controller.draftEffectText"),i;t.style[window._jcsspfx+"Transform"]=u,this.set("transform",u),Ember.isEmpty(n)?(t.style[window._jcsspfx+"TransformOrigin"]="",r.style[window._jcsspfx+"TransformOrigin"]=""):(i=(n.x!=null?n.x:"50")+"% "+(n.y!=null?n.y:"50")+"% "+(n.z!=null?n.z:"0")+"px",t.style[window._jcsspfx+"TransformOrigin"]=i,r.style[window._jcsspfx+"TransformOrigin"]=i)}.observes("controller.draftEffectText","controller.origin","controller.ease","controller.duration"),actions:{play:function(){var o;if(this.get("isPlayingMode")){this.get("timeline").paused(!1),this.set("isPlaying",!0);return}var t=this.get("sample"),e=this.get("guide"),r=this.get("transform"),f=this.get("timelineSlider"),i,u,n=new JTweenTimeline(null,0,null,{repeatCount:0});this.set("timeline",n),e.css("display","none"),f.css("display",""),this.get("controller.type")==="show"?(t.css(window._jcsspfx+"Transform",r),this.get("controller.draftEffect.fade")&&t.css("opacity",0),i=window.convertEaseName(this.get("controller.ease")),u=new JTween(t[0],Number(this.get("controller.duration")),{transform:JTween.resetTransform(r),opacity:1},{ease:i})):(i=window.convertEaseName(this.get("controller.ease")),u=new JTween(t[0],Number(this.get("controller.duration")),{transform:r,opacity:this.get("controller.draftEffect.fade")?0:1},{ease:i})),n.addTween(0,u),n.calculateDuration(),n.paused(!1),this.set("isPlaying",!0),this.set("isPlayingMode",!0),o=this,n.onChange=function(){f.slider("value",n.calculatedPosition*100/n.duration)}},pause:function(){this.get("isPlaying")&&(this.get("timeline").paused(!0),this.set("isPlaying",!1))},exitPlaying:function(){if(this.get("isPlayingMode")){this.set("isPlayingMode",!1),this.send("pause");var n=this.get("timeline"),t=this.get("tween"),i=this.get("sample"),r=this.get("guide"),u=this.get("timelineSlider");n.removeTween(t),n.paused(!0),n.onChange=null,n=null,t=null,this.set("tween",null),this.set("timeline",null),u.css("display","none"),i.css("opacity","").css(window._jcsspfx+"Transform",""),r.css("display","")}}}}),MSPanel.EffectList=Ember.View.extend({classNames:["msp-section msp-effect-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+__MSP_LAN.ee_001+'<\/span><\/div><div class="msp-section-content"><div class="msp-effect-list-cont">{{#each effect in presetEffects}}{{view MSPanel.EffectRow effect=effect}}{{/each}}<\/div><\/div>')}),MSPanel.EffectRow=Ember.View.extend({classNames:["msp-effect-row"],classNameBindings:["selected:active"],effect:null,selected:!1,template:Ember.Handlebars.compile('<span class="msp-effect-name">{{effect.name}}<\/span><a {{action "removeEffect" effect target=view bubbles=false}} class="msp-effect-remove"><span class="msp-ico msp-ico-grayremove"><\/span><\/a>'),click:function(){this.set("controller.currentEffect",this.get("effect")),this.get("controller").updateDraft(this.get("effect"))},onSelectChanged:function(){this.get("effect")===this.get("controller.currentEffect")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentEffect").on("init"),actions:{removeEffect:function(n){confirm('Are you sure want to delete "'+n.get("name")+'"?')&&this.get("controller").send("removeEffect",n),this.get("parentView").updatePresetEffects()}}}),function(n){MSPanel.ButtonEditor=Ember.View.extend({classNames:["mps-button-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.ButtonPreview layer=view.layer}}<div class="msp-section-content">{{partial "button-properties"}}<\/div><div class="msp-applystyle-cont"><button {{action "applyStyle"}} class="msp-blue-btn msp-applystyle">'+(__MSP_LAN.be_001||"Update Button Style")+'<\/button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+(__MSP_LAN.be_002||"Save As New Button")+"<\/button><\/div><\/div>{{view MSPanel.ButtonList}}"),didInsertElement:function(){var t=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:660,title:__MSP_LAN.be_005||"Button Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){t.get("controller").send("cancel"),t.get("controller.parent").closeButtonEditor()}}),n(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(n){var t=n.data.ref;t.$().dialog("option","position","center")},willDestroyElement:function(){n(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}});var t=780,i=150;MSPanel.ButtonPreview=Ember.View.extend({classNames:["msp-section","msp-style-preview"],template:Ember.Handlebars.compile('<div class="msp-style-preview-cont"><div class="msp-style-sample" id="sample"><a href="#" {{bind-attr class=":ms-btn controller.draftBtnStyle controller.draftBtnSize"}} id="btn">Button<\/a><\/div><div id="bgToggle" class="bgToggle"><\/div><\/div>'),didInsertElement:function(){var r=this.$("#sample"),i=this.$("#btn"),t;this.set("sample",r),t=this,this.$("#bgToggle").click(function(){var i=n(this);i.data("isBlack")?(t.$().css("background-color","white"),i.css("background-color","#222"),i.data("isBlack",!1)):(i.data("isBlack",!0),t.$().css("background-color","#222"),i.css("background-color","white"))}).css("background-color","#222");r.on({mouseover:function(){i.attr("style",t.get("controller.draftNormal")+";"+t.get("controller.draftHover"))},mouseout:function(){i.attr("style",t.get("controller.draftNormal"))},mousedown:function(){i.attr("style",t.get("controller.draftNormal")+";"+t.get("controller.draftHover")+";"+t.get("controller.draftActive"))},mouseup:function(){i.trigger("mouseover")},click:function(n){n.preventDefault()}});this.update()},alignCenter:function(){var n=this.get("sample");n.css("left",(t-n.outerWidth())/2).css("top",(i-n.outerHeight())/2)},update:function(){this.get("sample").trigger("mouseout");var n=this;setTimeout(function(){n.alignCenter()},10)}.observes("controller.draftNormal","controller.draftBtnStyle","controller.draftBtnSize")}),MSPanel.ButtonList=Ember.View.extend({classNames:["msp-section msp-style-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+(__MSP_LAN.be_004||"Buttons")+'<\/span><\/div><div class="msp-section-content"><div class="msp-style-list-cont">{{#each button in controller}}{{view MSPanel.ButtonRow button=button}}{{/each}}<\/div><\/div>')}),MSPanel.ButtonRow=Ember.View.extend({classNames:["msp-style-row","msp-be-btn-row"],classNameBindings:["selected:active"],button:null,selected:!1,template:Ember.Handlebars.compile('<span {{bind-attr class=":ms-btn button.style button.size button.className"}}>Button<\/span><a {{action "removeButton" button target=view bubbles=false}} class="msp-style-remove"><span class="msp-ico msp-ico-grayremove"><\/span><\/a>'),click:function(){this.set("controller.currentButton",this.get("button"))},onSelectChanged:function(){this.get("button")===this.get("controller.currentButton")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentButton").on("didInsertElement"),actions:{removeButton:function(n){confirm(__MSP_LAN.be_003||"Are you sure you want to delete this button?")&&this.get("controller").send("removeButton",n)}}})}(jQuery),MSPanel.ControlBtn=Ember.View.extend({control:null,tagName:"div",active:!1,classNames:["msp-control-btn"],classNameBindings:["active:msp-blue-btn"],template:Ember.Handlebars.compile('<span class="msp-control-label">{{view.control.label}}<\/span><a href="#" {{action "removeControl" target=view bubbles=false}}><span class="msp-control-removes msp-ico msp-ico-whiteremove"><\/span><\/a>'),didInsertElement:function(){},onActiveChange:function(){this.set("active",this.get("controller.currentControl")===this.get("control")),this.get("active")&&this.get("controller").send("showControlOptions")}.observes("controller.currentControl").on("init"),click:function(){this.get("active")||this.set("controller.currentControl",this.get("control"))},actions:{removeControl:function(){confirm('Are you sure want to remvoe "'+this.get("control.label")+'" control?')&&this.get("controller").send("removeControl",this.get("control"))}}}),MSPanel.TemplatesView=Ember.View.extend({templateName:"TemplatesModal",didInsertElement:function(){var n=this;this.$().dialog({resizable:!1,modal:!0,width:925,height:Math.max(350,window.innerHeight-100),title:__MSP_LAN.tv_001,draggable:!1,show:"fade",appendTo:MSPanel.rootElement,dialogClass:"msp-container msp-dialog",close:function(){n.get("controller").send("closeTemplates")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(n){var t=n.data.ref;t.$().dialog("option","height",Math.max(350,window.innerHeight-100)).dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}}),MSPanel.TemplateFigure=Ember.View.extend({msTemplate:null,selected:!1,classNames:["msp-template-figure"],classNameBindings:["selected:selected"],template:Ember.Handlebars.compile('{{#if view.selected}} <div class="msp-templte-selected"><\/div> {{/if}}<img {{bind-attr src=view.msTemplate.img}}><div class="msp-template-caption"><span>{{view.msTemplate.name}}<\/span><\/div>'),click:function(){this.set("controller.draftMSTemplate",this.get("msTemplate.value"))},templateChange:function(){this.set("selected",this.get("msTemplate.value")===this.get("controller.draftMSTemplate"))}.observes("controller.draftMSTemplate").on("init")}),function(n){function f(t){var i=n(u);return i.find("link").remove(),i.html().replace(/msp-hidden/g,t)}var u,i,r,t;for(MSPanel.MetaBoxComponent=Ember.Component.extend({tagName:"div",classNames:["msp-metabox"],layout:Ember.Handlebars.compile('<div class="msp-metabox-handle"><h3 class="msp-metabox-title">{{title}}<\/h3><div class="msp-metabox-toggle"><\/div><\/div>{{yield}}<div class="clear"> <\/div>')}),Ember.TEMPLATES["components/tabs-panel"]=Ember.Handlebars.compile("{{yield}}"),MSPanel.TabsPanelComponent=Ember.Component.extend({tagName:"div",attributeBindings:["id"],classNames:["msp-metabox msp-metabox-tabs"],didInsertElement:function(){this.$().avertaLiveTabs()}}),MSPanel.SwitchBoxComponent=Ember.Component.extend({classNames:["msp-switchbox"],offlable:"OFF",onlable:"ON",value:!1,layout:Ember.Handlebars.compile('<div class="msp-switch-cont"><span class="msp-switch-off">{{view.offlable}}<\/span><div class="msp-switch-handle"><\/div><span class="msp-switch-on">{{view.onlable}}<\/span><\/div>'),click:function(){var n=this;n.set("value",!n.get("value"))},update:function(){this.get("value")?this.$().addClass("switched"):this.$().removeClass("switched")}.observes("value").on("didInsertElement")}),MSPanel.AddDynamicTag=Ember.View.extend({classNames:["msp-add-dynamic-tags"],editorId:null,template:Ember.Handlebars.compile('<button {{action "addTag" target=view}} class="msp-add-btn"><span class="msp-ico msp-ico-whiteadd"><\/span><\/button><div class="msp-ddlist"><\/div>'),didInsertElement:function(){for(var i=n("<select><\/select>").appendTo(this.$(".msp-ddlist")).width(220),t=0,r=MSPanel.dynamicTags.length;t!==r;t++)i.append('<option value="'+MSPanel.dynamicTags[t].tag+'">'+MSPanel.dynamicTags[t].name+"<\/option>");this.set("select",i)},actions:{addTag:function(){var t=this.get("editorId");tinymce&&n("#wp-"+t+"-wrap").hasClass("tmce-active")?tinymce.get(t).execCommand("insertHTML",!1,this.get("select").val()):n("#"+t).insertAtCaret(this.get("select").val())}}}),u=jQuery("#mspHiddenEditor")[0].outerHTML,i=0,MSPanel.WPEditor=Ember.View.extend({classNames:["msp-wp-editor"],_id:null,template:null,tab:null,tabs:null,onInit:function(){var n="msp-wpeditor-"+i;this.set("_id",n),this.set("template",Ember.Handlebars.compile(f(n))),i++}.on("init"),didInsertElement:function(){var t=this.get("tabs");if(Ember.isEmpty(t)){this.createEditor();return}n("#"+t).bind("avtTabChange",{that:this},this.refreshEditor)},refreshEditor:function(n,t){var i=n.data.that;i.get("tab")===t&&i.createEditor()},createEditor:function(){var i,r,t,u,f;if(this.get("inited")!==!0&&(this.set("inited",!0),i=this.get("_id"),r=this,window.tinymce&&(t=n.extend({},window.tinyMCEPreInit.mceInit["msp-hidden"]||{}),t.forced_root_block="",t.force_br_newlines=!0,t.force_p_newlines=!1,t.wpautop=!1,tinyMCE.majorVersion=="3"?(t.body_class=t.elements=i,tinymce.init(t),setTimeout(function(){r.initEditor(tinyMCE.getInstanceById(i))},50)):tinyMCE.majorVersion=="4"&&(t.body_class="content post-type-post post-status-auto-draft post-format-standard",t.selector="#"+i,tinymce.init(t),setTimeout(function(){r.initEditor(tinyMCE.get(i))},50)),t.setup=function(){}),u=n.extend({},window.tinyMCEPreInit.qtInit["msp-hidden"]||{}),u.id=i,typeof QTags=="function")){f=quicktags(u),QTags.buttonsInitDone=!1,QTags._buttonsInit(),r.set("qtags",f),switchEditors.go(i,"html");this.$("textarea#"+this.get("_id")).on("change keyup paste",function(){r.set("value",n(this).val())})}},initEditor:function(n){function t(){r.set("internalChange",!0),r.set("value",n.getContent()),r.set("internalChange",!1)}var i=this.get("_id"),u=this.get("value"),r=this;this.$(".wp-editor-wrap").on("mousedown",function(){wpActiveEditor=i});if(tinyMCE.majorVersion=="3")n.onChange.add(t),n.onKeyUp.add(t);else if(tinyMCE.majorVersion=="4"){n.on("change",t);n.on("keyup",t)}this.$().click(t),setTimeout(function(){switchEditors.go(i,"html"),switchEditors.go(i,"tmce")},100),this.set("mce",n),this.onValueChanged()},onValueChanged:function(){var n,t;if(this.get("inited")){if(n=this.get("value"),this.$("textarea#"+this.get("_id")).val(n),this.get("internalChange")){this.set("internalChange",!1);return}t=this.get("mce"),Ember.isEmpty(t)||n==null?n==null&&t.setContent(" "):t.setContent(n)}}.observes("value"),willDestroyElement:function(){var t,i;this.get("inited")&&(window.tinymce&&tinymce.remove(this.get("_id")),t=this.get("qtags"),t&&(n(t.toolbar).remove(),t.toolbar=null,t=null,QTags.instances[this.get("_id")]&&delete QTags.instances[this.get("_id")],this.$("textarea#"+this.get("_id")).remove()),i=this.get("tabs"),Ember.isEmpty(i)||n("#"+i).unbind("avtTabChange",this.refreshEditor))}}),jQuery.ui&&jQuery.ui.spinner&&(jQuery.ui.spinner.prototype._events.mousewheel=function(n,t){if(t&&this.element.is(":focus")){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100),n.preventDefault()}}),MSPanel.NumberInputView=Ember.View.extend({step:1,min:0,tagName:"input",attributeBindings:["type"],lastValue:null,type:"text",didInsertElement:function(){var n=this,i=this.$(),t=function(){var t=i.spinner("value");n.set("internalChange",!0),isNaN(t)||t==null?n.set("value",undefined):n.set("value",parseFloat(t))};i.on("change",t).spinner({step:this.get("step"),numberFormat:"n",min:this.get("min"),max:this.get("max"),spin:t,stop:t}).spinner("value",this.get("value"))},onValueChanged:function(){if(this.get("internalChange")){this.set("internalChange",!1);return}this.$().spinner("value",this.get("value"))}.observes("value")}),Ember.Handlebars.helper("number-input",MSPanel.NumberInputView),MSPanel.ColorPickerComponent=Ember.Component.extend({tagName:"input",classNames:"msp-color-picker",value:null,didInsertElement:function(){var n=this;this.$().spectrum({color:this.get("value"),allowEmpty:!0,showInput:!0,showAlpha:!0,clickoutFiresChange:!0,preferredFormat:"hex6",change:function(t){t===null?n.set("value",null):n.set("value",t.toString())}})},willDestroyElement:function(){this.$().spectrum("destroy")},onValueChanged:function(){this.$().spectrum("set",this.get("value"))}.observes("value")}),MSPanel.DropdwonListComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist"],layout:Ember.Handlebars.compile("<select>{{yield}}<\/select>"),value:null,width:100,didInsertElement:function(){var n=this;this.$("select").on("change",function(){var t=n.$("select option:selected");n.set("value",t.attr("value"))}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.MultiDropdwonListComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-ddlist-multiselect"],layout:Ember.Handlebars.compile("<select {{bind-attr size=view.size}} multiple>{{yield}}<\/select>"),value:null,width:100,size:7,didInsertElement:function(){var t=this;this.$("select").on("change",function(){t.set("value",n(this).val())}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.GoogleFontsComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-gfonts-select"],defaultTemplate:Ember.Handlebars.compile('<select><option value="--" selected>Loading fonts..<\/option><\/select>'),value:null,variants:null,width:210,didInsertElement:function(){var n=this;GFonts.getList(function(){n.$("select").html('<option value="--" selected>-- select --<\/option>'+GFonts.generateSelectList()),n.onValueChanged(),n.$("select").trigger("change")}),this.$("select").on("change",function(){var t=n.$("select option:selected");t.val()==="--"?(n.set("value",undefined),n.set("variants",undefined)):(n.set("value",t.attr("value")),n.set("variants",t.attr("data-variants")))}).width(this.get("width")),n.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))?this.$("select").val("--"):this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.GoogleFontWeightsComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-gfonts-select msp-gfonts-weight"],defaultTemplate:Ember.Handlebars.compile("<select><\/select>"),variants:null,value:null,width:120,didInsertElement:function(){var n=this;this.$("select").on("change",function(){var t=n.$("select option:selected");if(t.length===0){n.$("select").val("normal");return}t.val()==="--"?n.set("value",null):n.set("value",t.attr("value"))}).width(this.get("width")),n.updateVariants()},updateVariants:function(){var n=this.get("variants"),i,r,t,u;if(Ember.isEmpty(n))this.$("select").html("<option>Select font<\/option>");else{for(i="",r=this.get("value"),n=n.split(","),t=0,u=n.length;t!==u;t++)n[t].indexOf("italic")===-1&&(i+=n[t]==="regular"?'<option value="normal"'+(r==="normal"?"selected":"")+">Normal<\/option>":'<option value="'+n[t]+'"'+(r===n[t]?"selected":"")+">"+n[t]+"<\/option>");this.$("select").html(i).trigger("change")}}.observes("variants")}),MSPanel.CodeMirrorComponent=Ember.Component.extend({classNames:["msp-codemirror"],width:250,height:200,mode:"css",tab:null,tabs:null,layout:Ember.Handlebars.compile("<textarea>{{yield}}<\/textarea>"),didInsertElement:function(){var i,t,r,u;this.$().width(this.get("width")).height(this.get("height")),i=this,t=CodeMirror.fromTextArea(this.$(">textarea")[0],{lineNumbers:!0,mode:this.get("mode")});t.on("change",function(){i.set("internalChange",!0),i.set("value",t.getValue())});this.set("editor",t),r=this.get("value"),Ember.isEmpty(r)||t.setValue(r),u=this.get("tabs"),Ember.isEmpty(u)||n("#"+u).bind("avtTabChange",{that:this},this.refreshEditor)},onValueChanged:function(){if(this.get("internalChange")===!0){this.set("internalChange",!1);return}this.get("editor").setValue(this.get("value")),this.set("internalChange",!1)}.observes("value"),refreshEditor:function(n,t){var i=n.data.that;i.get("tab")===t&&i.get("editor").refresh()},willDestroyElement:function(){var i=this.get("tabs"),t;Ember.isEmpty(i)||n("#"+i).unbind("avtTabChange",this.refreshEditor),t=this.get("editor"),t.toTextArea(),t=null,this.set("editor",null)}}),r='<div class="msp-pattern-prev ms-pattern"><\/div>',t=1;t<=15;t++)r+='<div class="msp-pattern-prev ms-pattern ms-patt-'+t+'" data-pattern="ms-patt-'+t+'"><\/div>';MSPanel.PatternPickerComponent=Ember.Component.extend({tagName:"div",classNames:["msp-pattern-picker"],value:null,patternBoxIsOpen:!1,layout:Ember.Handlebars.compile('<div class="msp-pattern-control sp-replacer sp-light"><div {{bind-attr class=":ms-pattern-preview :ms-pattern view.value"}}><\/div><div class="sp-dd"><\/div><\/div><div class="msp-patterns-box">'+r+"<\/div>"),didInsertElement:function(){var t=this;this.$(".msp-pattern-control").on("click",{that:this},this.togglePatternbox);n(document).on("click",{that:this},this.closePatternbox);this.$(".msp-patterns-box").css("display","none").on("click",function(n){n.stopPropagation()}).find(".ms-pattern").on("click",{that:this},this.selectPattern)},togglePatternbox:function(n){var t=n.data.that;n.stopPropagation(),t.get("patternBoxIsOpen")&&t.closePatternbox(n),t.$(".msp-patterns-box").css("display",""),t.set("patternBoxIsOpen",!0)},closePatternbox:function(n){var t=n.data.that;t.get("patternBoxIsOpen")&&(t.$(".msp-patterns-box").css("display","none"),t.set("patternBoxIsOpen",!1))},selectPattern:function(t){t.stopPropagation();var i=t.data.that;i.set("value",n(this).data("pattern"))},willDestroyElement:function(){this.$(".msp-patterns-box").off("click",this.togglePatternbox).find(".ms-pattern").off("click"),n(document).off("click",this.closePatternbox)}})}(jQuery),MSPanel.pushData=null,MSPanel.ApplicationController=Ember.Controller.extend({isFlickr:__MSP_TYPE==="flickr",isFacebook:__MSP_TYPE==="facebook",isPost:__MSP_TYPE==="post",isWcproduct:__MSP_TYPE==="wc-product",sliderId:MSPanel.SliderID,isSending:!1,statusMsg:"",hasError:!1,onInit:function(){MSPanel.Settings.find(),MSPanel.Slide.find(),MSPanel.Layer.find(),MSPanel.Style.find(),MSPanel.Effect.find(),MSPanel.PresetStyle.find(),MSPanel.PresetEffect.find(),MSPanel.Control.find(),MSPanel.Callback.find(),MSPanel.ButtonStyle.find(),this.set("disableControls",MSPanel.Settings.find(0).get("disableControls"));var n=this;MSPanel.pushData=function(){n.prepareData()},MSPanel.createButton=this.createButton,__MSP_TYPE==="wc-product"&&__MSP_POST==null&&__WC_INSTALL_URL!=null&&(this.set("hasError",!0),this.set("errorTemplate","wooc-error"),this.set("wooLink",__WC_INSTALL_URL)),this.generateButtonStyles(),this.set("shortCode","[masterslider id="+this.get("sliderId")+"]"),this.set("phpFunction","<?php masterslider("+this.get("sliderId")+"); ?>"),jQuery("#panelLoading").remove()}.on("init"),prepareData:function(){var n={},i="",t;MSPanel.Style.find().forEach(function(t){var i=t.get("fontFamily"),r=t.get("fontWeight");Ember.isEmpty(i)||(n[i]||(n[i]=[]),r==="normal"&&(r="regular"),Ember.isEmpty(r)||n[i].indexOf(r)!==-1||n[i].push(r))});for(t in n)i+=t.replace(/\s/,"+")+":"+n[t].join(",")+"|";MSPanel.Settings.find(1).set("usedFonts",i.slice(0,-1)),this.saveRecords(MSPanel.Settings.find()),this.saveRecords(MSPanel.Slide.find()),this.saveRecords(MSPanel.Layer.find()),this.saveRecords(MSPanel.Style.find()),this.saveRecords(MSPanel.Effect.find()),this.saveRecords(MSPanel.PresetStyle.find()),this.saveRecords(MSPanel.PresetEffect.find()),this.saveRecords(MSPanel.Control.find()),this.saveRecords(MSPanel.Callback.find()),this.saveRecords(MSPanel.ButtonStyle.find())},generateButtonStyles:function(){var i=MSPanel.ButtonStyle.find(),n="",t=$("#msp-buttons");i.forEach(function(t){n+="."+t.get("className")+" {"+t.get("normal")+"}\n."+t.get("className")+":hover {"+t.get("hover")+"}\n."+t.get("className")+":active {"+t.get("active")+"}\n"}),t.length===0?t=$('<style id="msp-buttons"><\/style>').text(n).appendTo($("head")):t.text(n)},actions:{saveAll:function(){this.prepareData(),this.sendData()},showPreview:function(n){window.lunchMastersliderPreview&&lunchMastersliderPreview(n)}},saveRecords:function(n){n.forEach(function(n){n.save()})},sendData:function(){this.set("statusMsg",__MSP_LAN.ap_001),this.set("isSending",!0);var n=this;jQuery.post(__MS.ajax_url,{action:"msp_panel_handler",nonce:jQuery("#msp-main-wrapper").data("nonce"),msp_data:B64.encode(JSON.stringify(MSPanel.data)),preset_style:B64.encode(JSON.stringify(MSPanel.PSData)),preset_effect:B64.encode(JSON.stringify(MSPanel.PEData)),buttons:B64.encode(JSON.stringify(MSPanel.PBData)),slider_id:MSPanel.SliderID},function(t){n.set("statusMsg",t.message),n.set("isSending",!1)})},createButton:function(n,t,i,r,u){var f=MSPanel.ButtonStyle.create({normal:n,hover:t,active:i,size:u,style:r});f.save(),f.set("className","msp-preset-btn-"+f.get("id")),f.save()}}),MSPanel.SettingsController=Ember.ObjectController.extend({customSlider:window.__MSP_TYPE&&window.__MSP_TYPE==="custom",templateSlider:window.__MSP_TYPE&&(window.__MSP_TYPE==="flickr"||window.__MSP_TYPE==="post"||window.__MSP_TYPE==="wc-product"||window.__MSP_TYPE==="facebook"),sliderSkins:__MSP_SKINS,needs:["application","controls"],msTemplateName:null,msTemplateImg:null,draftMSTemplate:null,templates:MSPanel.SliderTemplates,showAutoHeight:!1,showNearbyNum:!1,showWrapperWidth:!1,preloadMethod:null,setup:function(){var n=this.get("preload");n==="all"||n==="-1"?this.set("preloadMethod",n):this.set("preloadMethod","nearby"),this.set("draftMSTemplate",this.get("msTemplate")),this.updateTemplate(!0)},sliderLayoutChanged:function(){var n=this.get("layout");n==="fullscreen"||n==="autofill"?(this.set("showAutoHeight",!1),this.set("autoHeight",!1)):this.set("showAutoHeight",!0),this.set("showWrapperWidth",n==="boxed"||n==="partialview"),this.set("showFSMargin",n==="fullscreen")}.observes("layout").on("setup"),preloadSetup:function(){var t=this.get("preloadMethod"),n;t==="nearby"?(this.set("showNearbyNum",!0),n=this.get("preload"),(n==="all"||n==="-1")&&this.set("preload","0")):(this.set("showNearbyNum",!1),this.set("preload",t))}.observes("preloadMethod").on("setup"),updateTemplate:function(n){var t,s=this.get("msTemplate"),r,f,e,i,u,o;if(this.get("templates").forEach(function(n){if(n.value===s){t=n;return}}),t){if(this.set("msTemplateName",t.name),this.set("msTemplateImg",t.img),this.set("msTemplateClass",t.className),this.set("controllers.application.disableControls",t.disableControls),this.set("disableControls",t.disableControls),!n){for(r=this.get("controllers.controls"),e=MSPanel.Control.find();e.get("firstObject");)i=e.get("firstObject"),r.findControlObj(i.get("name")).used=!1,i.deleteRecord();for(u in t.controls)f=r.findControlObj(u),i=MSPanel.Control.create($.extend(!0,r.getDefaultValues(u),t.controls[u])),i.set("label",f.label),f.used=!0,i.save();for(o in t.settings)this.set(o,t.settings[o])}}else this.set("draftMSTemplate","custom"),this.updateTemplate()},actions:{openTemplates:function(){var n=MSPanel.TemplatesView.create({controller:this});this.get("mainView").createChildView(n),this.set("templatesView",n),n.appendTo(MSPanel.rootElement)},closeTemplates:function(){this.get("templatesView").destroy(),this.set("draftMSTemplate",this.get("msTemplate"))},saveTemplate:function(){if(this.get("draftMSTemplate")===this.get("msTemplate")){this.send("closeTemplates");return}confirm(__MSP_LAN.tv_002)&&(this.set("msTemplate",this.get("draftMSTemplate")),this.send("closeTemplates"),this.updateTemplate())}}}),MSPanel.SlidesController=Ember.ArrayController.extend({needs:["flickr"],customSlider:window.__MSP_TYPE&&window.__MSP_TYPE==="custom",templateSlider:window.__MSP_TYPE&&(window.__MSP_TYPE==="flickr"||window.__MSP_TYPE==="post"||window.__MSP_TYPE==="facebook"||window.__MSP_TYPE==="wc-product"),_order:-1,sortProperties:["order"],stylesController:null,effectsController:null,buttonsController:null,layersList:[],layersController:null,mainView:null,currentSlide:null,setup:function(){if(this.get("length")===0)this.send("newSlide");else{var n=this.get("firstObject");this.set("currentSlide",n),this.updateLayersList(n.get("layers"))}Ember.isEmpty(this.get("sliderSettings.type"))&&this.set("sliderSettings.type",__MSP_TYPE),this.set("sliderSettings.sliderId",MSPanel.SliderID),this.updateOrder()},duplicateSlide:function(n){var i=n.toJSON(),t;delete i.id,delete i.layers,t=MSPanel.Slide.create(i),n.get("layers").forEach(function(n){var r=n.toJSON(),s=n.get("styleModel").toJSON(),h=n.get("showEffect").toJSON(),c=n.get("hideEffect").toJSON(),u,f,e,i,o;delete r.id,delete s.id,delete h.id,delete c.id,u=MSPanel.Style.create(s),u.save(),r.styleModel=u,f=MSPanel.Effect.create(h),f.save(),r.showEffect=f,e=MSPanel.Effect.create(c),e.save(),r.hideEffect=e,r.slide=t,i=MSPanel.Layer.create(r),i.save(),i.get("styleModel.type")==="custom"&&(o="msp-cn-"+MSPanel.SliderID+"-"+i.get("id"),i.set("styleModel.className",o),i.set("className",o),u.save(),i.save()),t.get("layers").addObject(i)}),t.set("order",n.get("order")+1),this.forEach(function(n){var i=n.get("order"),r=t.get("order");i>=r&&n!==t&&n.set("order",i+1)}),t.save(),this.updateOrder()},updateSlidesSort:function(n){this.beginPropertyChanges(),this.forEach(function(t){t.set("order",n[t.get("id")])},this),this.endPropertyChanges(),this.set("_order",this.get("lastObject.order"))},updateOrder:function(){var n=0;this.forEach(function(t){t.set("order",n++)}),this.set("_order",n-1)},removeSlide:function(n){n.get("layers").forEach(function(n){n.get("styleModel").deleteRecord(),n.get("showEffect").deleteRecord(),n.get("hideEffect").deleteRecord(),n.deleteRecord()}),n.deleteRecord(),this.get("length")===0?this.send("newSlide"):this.send("select",this.get("firstObject")),this.updateOrder()},updateLayersList:function(n){this.set("layersList",n)},openStyleEditor:function(n){var i=this.get("stylesController"),t;i.addLayer(n),t=MSPanel.StyleEditor.create({controller:i}),this.get("mainView").createChildView(t),this.set("styleEditor",t),t.appendTo(MSPanel.rootElement)},closeStyleEditor:function(){var n=this.get("styleEditor");Ember.isEmpty(n)||(n.destroy(),this.set("styleView",null))},openEffectEditor:function(n,t){var r=this.get("effectsController"),i;r.addLayer(n,t),i=MSPanel.EffectEditor.create({controller:r}),this.get("mainView").createChildView(i),this.set("effectEditor",i),i.appendTo(MSPanel.rootElement)},closeEffectEditor:function(){var n=this.get("effectEditor");Ember.isEmpty(n)||(n.destroy(),this.set("effectView",null))},openButtonEditor:function(n){var i=this.get("buttonsController"),t;i.addLayer(n),t=MSPanel.ButtonEditor.create({controller:i}),this.get("mainView").createChildView(t),this.set("buttonView",t),t.appendTo(MSPanel.rootElement)},closeButtonEditor:function(){var n=this.get("buttonView");Ember.isEmpty(n)||(n.destroy(),this.set("buttonView",null))},actions:{newSlide:function(){var n=MSPanel.Slide.create({order:this.get("_order")+1});this.set("currentSlide",n),this.set("_order",this.get("_order")+1),this.updateLayersList(n.get("layers")),n.save()},select:function(n){n!==this.get("currentSlide")&&(this.set("currentSlide",n),this.updateLayersList(n.get("layers")))}}}),MSPanel.LayersController=Ember.ArrayController.extend({slide:null,currentLayer:null,_order:-1,sortProperties:["order"],sortAscending:!1,buttonClasses:null,layertypes:[{lable:__MSP_LAN.lc_001,value:"text"},{lable:__MSP_LAN.lc_002,value:"image"},{lable:__MSP_LAN.lc_006||"Button Layer",value:"button"},{lable:__MSP_LAN.lc_003,value:"video"},{lable:__MSP_LAN.lc_004,value:"hotspot"}],onSlideChanged:function(){this.set("slide",this.get("parentController.currentSlide")),this.get("isPreviewMode")&&this.send("exitPreviewMode"),this.send("clearSelect"),this.updateOrder()}.observes("parentController.currentSlide").on("init"),onInit:function(){this.set("parentController.layersController",this),this.set("sliderSettings",this.get("parentController.sliderSettings")),this.set("buttonClasses",MSPanel.ButtonStyle.find())}.on("init"),onModel:function(){this.updateOrder()}.observes("model"),updateLayersSort:function(n){this.beginPropertyChanges(),this.forEach(function(t){t.set("order",n[t.get("id")])},this),this.endPropertyChanges()},updateOrder:function(){this.beginPropertyChanges();var n=this.get("length");this.forEach(function(t){t.set("order",--n)}),this.endPropertyChanges(),this.set("_order",this.get("length")-1)},duplicateLayer:function(n){var r,u,f,t,e;this.beginPropertyChanges();var i=n.toJSON(),o=n.get("styleModel").toJSON(),s=n.get("showEffect").toJSON(),h=n.get("hideEffect").toJSON();delete i.id,delete o.id,delete s.id,delete h.id,r=MSPanel.Style.create(o),r.save(),i.styleModel=r,u=MSPanel.Effect.create(s),u.save(),i.showEffect=u,f=MSPanel.Effect.create(h),f.save(),i.hideEffect=f,i.slide=this.get("slide"),t=MSPanel.Layer.create(i),t.save(),t.get("styleModel.type")==="custom"&&(e="msp-cn-"+MSPanel.SliderID+"-"+t.get("id"),t.set("styleModel.className",e),t.set("className",e),r.save(),t.save()),this.get("slide.layers").addObject(t),this.forEach(function(n){var i=n.get("order"),r=t.get("order");i>=r&&n!==t&&n.set("order",i+1)}),t.save(),this.endPropertyChanges()},removeLayer:function(n){n===this.get("currentLayer")&&(this.set("currentLayer",null),this.set("layerSettings",null)),n.get("styleModel").deleteRecord(),n.get("showEffect").deleteRecord(),n.get("hideEffect").deleteRecord(),this.get("model").removeObject(n),n.deleteRecord(),this.updateOrder()},onLayerSelect:function(){this.get("currentLayer")===null?this.set("layerSettings","empty-template"):this.set("layerSettings",this.get("currentLayer.type")+"-layer-settings")}.observes("currentLayer"),willDestroyElement:function(){this.get("isPreviewMode")&&this.send("exitPreviewMode")},onLayerContentChanged:function(){MSPanel.dynamicTags&&this.get("currentLayer.type")==="text"&&this.set("currentLayer.dynamicContent",this._replcateDynamicTags(this.get("currentLayer.content")))}.observes("currentLayer","currentLayer.content"),_replcateDynamicTags:function(n){var t,r=MSPanel.dynamicTags.length,i;return n.replace(/{{[\w-]+}}/g,function(n){for(t=0;t!==r;t++)if(i=MSPanel.dynamicTags[t],n===i.tag)return i.generator(i);return n})},updateDynamicContent:function(){var n=this;this.forEach(function(t){t.get("type")==="text"&&t.set("dynamicContent",n._replcateDynamicTags(t.get("content")))})},actions:{newLayer:function(n){var t=MSPanel.Layer.create({slide:this.get("slide"),name:"layer",type:n,order:this.get("_order")+1}),i,r,u;this.set("_order",this.get("_order")+1),i=MSPanel.Style.create(),i.save(),t.set("styleModel",i),r=MSPanel.Effect.create(),r.save(),t.set("showEffect",r),u=MSPanel.Effect.create(),u.save(),t.set("hideEffect",u),t.save(),this.get("model").addObject(t),this.get("model").save()},selectLayer:function(n){this.set("currentLayer",n)},clearSelect:function(){this.set("currentLayer",null)},enterPreviewMode:function(){var n,t;if(this.get("length")!==0){if(this.get("isPreviewMode")){this.send("resume");return}n=new JTweenTimeline(null,0,null,{repeatCount:0}),this.forEach(function(t){var i=t.get("stageLayer");i.registerTween(n)}),this.set("tweenTimeline",n),n.calculateDuration(),n.position(0),this.set("isPreviewMode",!0),this.set("isPlaying",!0),t=this,n.onChange=function(){t.set("timelinePos",n.calculatedPosition)},this.set("currentLayer",null)}},exitPreviewMode:function(){if(this.get("isPreviewMode")){var n=this.get("tweenTimeline");this.forEach(function(t){var i=t.get("stageLayer");i.reset(n)}),n.paused(!0),this.set("tweenTimeline",null),n=null,this.set("isPlaying",!1),this.set("isPreviewMode",!1)}},resume:function(){this.get("isPlaying")||(this.get("tweenTimeline").paused(!1),this.set("isPlaying",!0))},pause:function(){this.get("isPlaying")&&(this.get("tweenTimeline").paused(!0),this.set("isPlaying",!1))},openStyleEditor:function(){this.get("parentController").openStyleEditor(this.get("currentLayer"))},openEffectEditor:function(n){this.get("parentController").openEffectEditor(this.get("currentLayer"),n)},openButtonEditor:function(){this.get("parentController").openButtonEditor(this.get("currentLayer"))}}}),MSPanel.StylesController=Ember.ArrayController.extend({layer:null,presetCSS:null,draftStyle:null,draftStyleText:null,draftClassName:null,wordwrap:!0,fontVariants:null,lineHeight:null,addLayer:function(n){var t,i;this.set("layer",n),t=this.get("layer.styleModel").toJSON(),delete t.id,this.set("draftStyle",MSPanel.Style.create(t)),this.set("draftClassName",this.get("layer.styleClass"));for(i in t)this.get("draftStyle").addObserver(i,this,"onDraftChange");this.onDraftChange()},loadFont:function(){var n=this.get("draftStyle.fontFamily");Ember.isEmpty(n)||GFonts.load(n,this.get("fontVariants"))}.observes("draftStyle.fontFamily"),updateDraft:function(n){var n,t;this.beginPropertyChanges(),n=n.toJSON(),delete n.id;for(t in n)t!=="type"&&this.set("draftStyle."+t,n[t]);this.set("presetClassName",n.className),this.set("presetCSS",this.styleObjectToString(n)),this.endPropertyChanges()},onWordwrap:function(){this.get("wordwrap")?this.set("draftStyle.whiteSpace",null):this.set("draftStyle.whiteSpace","nowrap")}.observes("wordwrap"),onBorderUpdate:function(){var n=Ember.isEmpty(this.get("draftStyle.borderTop"))&&Ember.isEmpty(this.get("draftStyle.borderBottom"))&&Ember.isEmpty(this.get("draftStyle.borderLeft"))&&Ember.isEmpty(this.get("draftStyle.borderRight"))&&Ember.isEmpty(this.get("draftStyle.borderColor"));Ember.isEmpty(this.get("draftStyle.borderStyle"))&&!n?this.set("draftStyle.borderStyle","solid"):n&&this.set("draftStyle.borderStyle",undefined)}.observes("draftStyle.borderTop","draftStyle.borderBottom","draftStyle.borderLeft","draftStyle.borderRight","draftStyle.borderColor"),lineHeightFix:function(){var n=this.get("lineHeight");Ember.isEmpty(n)?this.set("draftStyle.lineHeight","normal"):this.set("draftStyle.lineHeight",n+"px")}.observes("lineHeight"),onDraftChange:function(){this.set("draftStyleText",this.styleObjectToString(this.get("draftStyle").toJSON()))},actions:{applyStyle:function(){var n,i,r,t;this.beginPropertyChanges(),n=this.get("draftStyle").toJSON(),delete n.id,delete n.type,delete n.name;for(i in n)this.set("layer.styleModel."+i,n[i]);r=this.styleObjectToString(n),this.get("layer.stageLayer").updateLayerStyle(this.cssToObject(r)),r!==this.get("presetCSS")?(t="msp-cn-"+MSPanel.SliderID+"-"+this.get("layer.id"),this.set("layer.styleModel.type","custom")):(t=this.get("presetClassName"),this.set("layer.styleModel.type","copy")),this.set("layer.styleModel.className",t),this.set("layer.className",t),this.endPropertyChanges(),this.get("parent").closeStyleEditor(),this.send("cancel"),this.set("draftStyleText",null)},saveAsPreset:function(){var i=prompt(__MSP_LAN.sc_001,__MSP_LAN.sc_002),n,t;if(i==="")i=__MSP_LAN.sc_002;else if(i===null)return;this.beginPropertyChanges(),n=this.get("draftStyle").toJSON(),n.type="preset",n.name=i,delete n.id,t=MSPanel.PresetStyle.create(n),t.save(),t.set("className","msp-preset-"+t.get("id")),t.save(),this.endPropertyChanges()},cancel:function(){for(var n in this.get("draftStyle").toJSON())this.get("draftStyle").removeObserver(n,this,"onDraftChange");this.get("draftStyle").deleteRecord()},removeStyle:function(n){n.deleteRecord()}},styleObjectToString:function(n){var t=n,r="",u="",f,i;t.name=undefined,t.className=undefined,t.css=undefined,t.type=undefined,t.id=undefined,Ember.isEmpty(t.custom)||(u=t.custom.replace(/(\r\n|\n|\r)/gm,"")),t.custom=undefined;for(i in t)f=t[i],f!==undefined&&(r+=this.camelToDash(i)+":"+t[i]+(typeof t[i]=="number"?"px":"")+";");return r+u},cssToObject:function(n){var r={},u=n.split(";"),t,f,i;for(n=n.replace(/(\r\n|\n|\r)/gm,""),t=0,f=u.length;t!==f;t++)i=u[t].split(":"),i[1]!=null&&(r[i[0]]=i[1]);return r},camelToDash:function(n){return n.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}}),MSPanel.EffectsController=Ember.ArrayController.extend({type:"show",layer:null,ease:null,duration:5,origin:null,preview:null,draftEffect:null,draftTextEffect:null,addLayer:function(n,t){var i,r,u;this.set("layer",n),this.set("type",t),i=this.get("layer."+t+"Effect").toJSON(),delete i.id,r=MSPanel.Effect.create(i),this.set("draftEffect",r),this.set("ease",this.get("layer."+t+"Ease"));for(u in i)this.get("draftEffect").addObserver(u,this,"onDraftChange");this.set("duration",n.get(t+"Duration")),this.set("ease",n.get(t+"Ease")),this.onDraftChange()},updateDraft:function(n){var t,i;this.beginPropertyChanges(),t=n.toJSON(),delete t.id;for(i in t)i!=="type"&&this.set("draftEffect."+i,t[i]);this.endPropertyChanges()},onDraftChange:function(){this.set("draftEffectText",this.createTransform(this.get("draftEffect").toJSON())),this.set("origin",{x:this.get("draftEffect.originX"),y:this.get("draftEffect.originY"),z:this.get("draftEffect.originZ")})},onEaseUpdate:function(){this.set("layer."+this.get("type")+"Ease",this.get("ease"))}.observes("ease"),actions:{applyEffect:function(){var n,t,r,i;this.beginPropertyChanges(),n=this.get("type"),t=this.get("draftEffect").toJSON(),delete t.id,delete t.type,delete t.name;for(r in t)this.set("layer."+n+"Effect."+r,t[r]);i=this.get("origin"),this.set("layer."+n+"EffFunc",this.createEffectFunc(t)),this.set("layer."+n+"Ease",this.get("ease")),this.set("layer."+n+"Fade",this.get("draftEffect.fade")),this.set("layer."+n+"Duration",this.get("duration")),this.set("layer."+n+"Transform","perspective(2000px) "+this.get("draftEffectText")),this.set("layer."+n+"Origin",(i.x!==undefined?i.x:"50")+"% "+(i.y!==undefined?i.y:"50")+"% "+(i.z!==undefined?i.z:"0")+"px"),this.endPropertyChanges(),this.send("cancel"),this.get("parent").closeEffectEditor()},saveAsPreset:function(){var t=prompt(__MSP_LAN.ec_001,__MSP_LAN.ec_002),n,i;if(t==="")t=__MSP_LAN.ec_002;else if(t===null)return;this.beginPropertyChanges(),n=this.get("draftEffect").toJSON(),n.type="preset",n.name=t,delete n.id,i=MSPanel.PresetEffect.create(n),i.save(),this.endPropertyChanges()},cancel:function(){var n=this.get("preview");Ember.isEmpty(n)||n.send("exitPlaying"),this.get("draftEffect").deleteRecord()},removeEffect:function(n){n.deleteRecord()}},createEffectFunc:function(n){return"t("+(n.fade?"true":"false")+","+(n.translateX!=undefined?n.translateX:"n")+","+(n.translateY!=undefined?n.translateY:"n")+","+(n.translateZ!=undefined?n.translateZ:"n")+","+(n.rotate!=undefined?n.rotate:"n")+","+(n.rotateX!=undefined?n.rotateX:"n")+","+(n.rotateY!=undefined?n.rotateY:"n")+","+(n.rotateZ!=undefined?n.rotateZ:"n")+","+(n.scaleX!=undefined?n.scaleX:"n")+","+(n.scaleY!=undefined?n.scaleY:"n")+","+(n.skewX!=undefined?n.skewX:"n")+","+(n.skewY!=undefined?n.skewY:"n")+","+(n.originX!=undefined?n.originX:"n")+","+(n.originY!=undefined?n.originY:"n")+","+(n.originZ!=undefined?n.originZ:"n")+")"},createTransform:function(n){return(n.translateX!=undefined?"translateX("+n.translateX+"px) ":"")+(n.translateY!=undefined?"translateY("+n.translateY+"px) ":"")+(n.translateZ!=undefined?"translateZ("+n.translateZ+"px)":"")+(n.rotate!=undefined?"rotate("+n.rotate+"deg) ":"")+(n.rotateX!=undefined?"rotateX("+n.rotateX+"deg) ":"")+(n.rotateY!=undefined?"rotateY("+n.rotateY+"deg) ":"")+(n.rotateZ!=undefined?"rotateZ("+n.rotateZ+"deg) ":"")+(n.skewX!=undefined?"skewX("+n.skewX+"deg) ":"")+(n.skewY!=undefined?"skewY("+n.skewY+"deg) ":"")+(n.scaleX!=undefined?"scaleX("+n.scaleX+") ":"")+(n.scaleY!=undefined?"scaleY("+n.scaleY+") ":"")}}),MSPanel.ButtonsController=Ember.ArrayController.extend({needs:"application",layer:null,draftNormal:"",draftHover:"",draftActive:"",currentButton:null,addLayer:function(n){this.set("layer",n),this.onCurrentButtonChange()},onCurrentButtonChange:function(){if(this.get("length")!==0){var n=this.get("currentButton");Ember.isEmpty(n)&&(n=this.get("firstObject"),this.set("currentButton",n)),this.set("draftNormal",n.get("normal")),this.set("draftHover",n.get("hover")),this.set("draftActive",n.get("active")),this.set("draftBtnStyle",n.get("style")),this.set("draftBtnSize",n.get("size"))}}.observes("currentButton").on("init"),actions:{applyStyle:function(){if(this.get("length")===0||confirm(__MSP_LAN.be_006||"By updating a button it will be changed in all of your sliders. Are you sure you want to update this button?")){if(this.get("length")===0){this.send("saveAsPreset");return}}else return;this.beginPropertyChanges(),this.set("currentButton.normal",this.get("draftNormal")),this.set("currentButton.hover",this.get("draftHover")),this.set("currentButton.active",this.get("draftActive")),this.set("currentButton.style",this.get("draftBtnStyle")),this.set("currentButton.size",this.get("draftBtnSize")),this.get("currentButton").save(),this.endPropertyChanges(),this.get("controllers.application").generateButtonStyles(),this.get("parent").closeButtonEditor(),this.send("cancel")},saveAsPreset:function(){this.beginPropertyChanges();var n=MSPanel.ButtonStyle.create({normal:this.get("draftNormal"),hover:this.get("draftHover"),active:this.get("draftActive"),size:this.get("draftBtnSize"),style:this.get("draftBtnStyle")});n.save(),n.set("className","msp-preset-btn-"+n.get("id")),n.save(),this.endPropertyChanges(),this.get("controllers.application").generateButtonStyles(),this.get("parent").closeButtonEditor(),this.send("cancel")},removeButton:function(n){n.deleteRecord(),this.get("controllers.application").generateButtonStyles()},cancel:function(){this.set("draftNormal",""),this.set("draftHover",""),this.set("draftActive",""),this.set("draftBtnSize",null),this.set("draftBtnStyle",null),this.set("currentButton",null)}}}),MSPanel.ControlsController=Ember.ArrayController.extend({needs:"application",controls:[{used:!1,label:__MSP_LAN.cc_001,value:"arrows"},{used:!1,label:__MSP_LAN.cc_002,value:"timebar"},{used:!1,label:__MSP_LAN.cc_003,value:"bullets"},{used:!1,label:__MSP_LAN.cc_004,value:"circletimer"},{used:!1,label:__MSP_LAN.cc_005,value:"scrollbar"},{used:!1,label:__MSP_LAN.cc_006,value:"slideinfo"},{used:!1,label:__MSP_LAN.cc_007,value:"thumblist"}],selectedControl:null,availableControls:[],noMore:!1,currentControl:null,setup:function(){var n=this;this.forEach(function(t){n.findControlObj(t.get("name")).used=!0}),this.set("availableControls",this.findAvailableControls())},actions:{addControl:function(){var t=this.get("selectedControl"),i=this.findControlObj(t),n;n=MSPanel.Control.create(this.getDefaultValues(t)),n.set("label",i.label),i.used=!0,this.set("availableControls",this.findAvailableControls()),n.save(),this.set("currentControl",n)},removeControl:function(n){this.findControlObj(n.get("name")).used=!1,this.set("availableControls",this.findAvailableControls()),n.deleteRecord(),this.set("currentControl",this.get("firstObject")),this.send("showControlOptions")},showControlOptions:function(){var n=this.get("currentControl");Ember.isEmpty(n)?this.set("controlOptions","empty-template"):this.set("controlOptions",n.get("name")+"-options")}},findControlObj:function(n){for(var i=this.get("controls"),t=0,r=i.length;t!==r;t++)if(i[t].value===n)return i[t];return null},findAvailableControls:function(){for(var n=[],i=this.get("controls"),t=0,r=i.length;t!==r;t++)i[t].used||n.push(i[t]);return this.set("noMore",n.length===0),this.set("selectedControl",n[0]?n[0].value:null),n},getDefaultValues:function(n){var t={name:n};t.inset=!(n==="slideinfo"||n==="thumblist");switch(n){case"timebar":t.align="bottom",t.color="#FFFFFF",t.autoHide=!1,t.width=4;break;case"bullets":t.align="bottom",t.dir="h",t.margin=10;break;case"circletimer":t.color="#A2A2A2",t.stroke=10,t.radius=4,t.autoHide=!1;break;case"scrollbar":t.align="top",t.dir="h",t.color="#3D3D3D",t.margin=10,t.autoHide=!1,t.width=4;break;case"slideinfo":t.align="bottom",t.margin=10,t.autoHide=!1;break;case"thumblist":t.align="bottom",t.space=5,t.width=100,t.height=80,t.margin=10,t.fillMode="fill",t.autoHide=!1}return t}}),MSPanel.CallbacksController=Ember.ArrayController.extend({callbacks:[{used:!1,label:__MSP_LAN.cb_011,value:"INIT"},{used:!1,label:__MSP_LAN.cb_001,value:"CHANGE_START"},{used:!1,label:__MSP_LAN.cb_002,value:"CHANGE_END"},{used:!1,label:__MSP_LAN.cb_003,value:"WAITING"},{used:!1,label:__MSP_LAN.cb_004,value:"RESIZE"},{used:!1,label:__MSP_LAN.cb_005,value:"VIDEO_PLAY"},{used:!1,label:__MSP_LAN.cb_006,value:"VIDEO_CLOSE"},{used:!1,label:__MSP_LAN.cb_007,value:"SWIPE_START"},{used:!1,label:__MSP_LAN.cb_008,value:"SWIPE_MOVE"},{used:!1,label:__MSP_LAN.cb_009,value:"SWIPE_END"}],availableCallbacks:[],noMore:!1,selectedCallback:null,setup:function(){var n=this;this.forEach(function(t){n.findCallbackObj(t.get("name")).used=!0}),this.set("availableCallbacks",this.findAvailableCallbacks())},actions:{addCallback:function(){var i=this.get("selectedCallback"),n=this.findCallbackObj(i),t;t=MSPanel.Callback.create({name:n.value,label:n.label}),n.used=!0,this.set("availableCallbacks",this.findAvailableCallbacks()),t.save()},removeCallback:function(n){confirm(__MSP_LAN.cb_010.jfmt(n.get("label")))&&(this.findCallbackObj(n.get("name")).used=!1,this.set("availableCallbacks",this.findAvailableCallbacks()),n.deleteRecord())}},findCallbackObj:function(n){for(var i=this.get("callbacks"),t=0,r=i.length;t!==r;t++)if(i[t].value===n)return i[t];return null},findAvailableCallbacks:function(){for(var n=[],i=this.get("callbacks"),t=0,r=i.length;t!==r;t++)i[t].used||n.push(i[t]);return this.set("noMore",n.length===0),this.set("selectedCallback",n[0]?n[0].value:null),n}}),function(n){function f(){t||(t=!0,MSPanel.dynamicTags&&MSPanel.dynamicTags.push({name:__MSP_LAN.flk_001||"Photo title",tag:"{{title}}",generator:function(){return MSPanel.flickrData.title||"{{title}}"}},{name:__MSP_LAN.flk_002||"Photo owner name",tag:"{{owner-name}}",generator:function(){return MSPanel.flickrData.ownername||"{{owner-name}}"}},{name:__MSP_LAN.flk_003||"Date taken",tag:"{{date-taken}}",generator:function(){return MSPanel.flickrData.datetaken||"{{date-taken}}"}},{name:__MSP_LAN.flk_004||"Photo description",tag:"{{description}}",generator:function(){return MSPanel.flickrData.description._content||"{{description}}"}}))}var i=function(n,t,i){return"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+n+"&photoset_id="+t+"&per_page="+i+"&extras=description,date_taken,owner_name,views&format=json&jsoncallback=?"},r=function(n,t,i){return"https://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key="+n+"&user_id="+t+"&per_page="+i+"&extras=description,date_taken,owner_name,views&format=json&jsoncallback=?"},u=function(n,t,i,r,u){return u=u==="-"?"":"_"+u,"https://farm"+n+".staticflickr.com/"+t+"/"+i+"_"+r+u+".jpg"},t=!1;MSPanel.flickrData={},MSPanel.FlickrController=Ember.ObjectController.extend({needs:["slides"],isPhotoset:null,firstSlide:null,photoData:null,needToReload:!1,ajaxRequest:null,setup:function(){f(),Ember.isEmpty(this.get("imgCount"))&&this.set("imgCount",10),Ember.isEmpty(this.get("setType"))&&this.set("setType","photos"),Ember.isEmpty(this.get("imgSize"))&&this.set("imgSize","c"),Ember.isEmpty(this.get("thumbSize"))&&this.set("thumbSize","q"),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData()},loadData:function(){var t,u,f;this.set("needToReload",!1),this.set("controllers.slides.layersController.noticeMsg","Loading data from Flickr..."),t=this.get("ajaxRequest"),Ember.isEmpty(t)||t.abort(),u=this,f=this.get("setType")==="photoset"?n.getJSON(i(this.get("apiKey"),this.get("setId"),1),function(n){u._photoData(n)}):n.getJSON(r(this.get("apiKey"),this.get("setId"),1),function(n){u._photoData(n)}),this.set("ajaxRequest",f)},checkForReload:function(){this.set("needToReload",!0)}.observes("setType","apiKey","id"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&this.loadData()},_photoData:function(n){if(n.stat==="fail"){this.set("firstSlide.bg",undefined),MSPanel.flickrData={},this.get("controllers.slides.layersController").updateDynamicContent(),this.set("controllers.slides.layersController.noticeMsg",'<span style="color:#FF4700;">Flickr API error #'+n.code+": "+n.message+". Please check Flicker settings.<\/span>");return}n=n[this.get("setType")].photo[0],MSPanel.flickrData=n,this.set("photoData",n),this._updateBGImage(),this.set("controllers.slides.layersController.noticeMsg",undefined),this.get("controllers.slides.layersController").updateDynamicContent()},_updateBGImage:function(){var n=this.get("photoData");Ember.isEmpty(n)||this.set("firstSlide.bg",u(n.farm,n.server,n.id,n.secret,this.get("imgSize")))}.observes("imgSize"),onTypeChange:function(){this.set("isPhotoset",this.get("setType")==="photoset")}.observes("setType").on("init")})}(jQuery),function(n){function f(){t||(t=!0,MSPanel.dynamicTags&&MSPanel.dynamicTags.push({name:__MSP_LAN.fb_001||"Photo name",tag:"{{name}}",generator:function(){return MSPanel.facebookData.name||"{{name}}"}},{name:__MSP_LAN.fb_002||"Photo owner name",tag:"{{owner-name}}",generator:function(){return MSPanel.facebookData.from.name||"{{owner-name}}"}},{name:__MSP_LAN.fb_003||"Phoot link",tag:"{{link}}",generator:function(){return MSPanel.facebookData.link||"{{link}}"}}))}var i=function(n,t){return"http://graph.facebook.com/"+n+"/photos/uploaded/?fields=source,name,link,images,from&limit="+t},r=function(n,t){return"http://graph.facebook.com/"+n+"/photos?fields=source,name,link,images,from&limit="+t},u=function(n,t){if(t==="orginal")return n[0].source;for(var i=0,r=n.length;i!==r;i++)if(n[i].source.indexOf(t+"x"+t)!==-1)return n[i].source;return n[r-3].source},t=!1;MSPanel.facebookData={},MSPanel.FacebookController=Ember.ObjectController.extend({needs:["slides"],isPhotostream:null,firstSlide:null,photoData:null,needToReload:!1,ajaxRequest:null,setup:function(){f(),Ember.isEmpty(this.get("imgCount"))&&this.set("imgCount",10),Ember.isEmpty(this.get("setType"))&&this.set("setType","album"),Ember.isEmpty(this.get("imgSize"))&&this.set("imgSize","orginal"),Ember.isEmpty(this.get("thumbSize"))&&this.set("thumbSize","320"),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData()},loadData:function(){var t,u,f;this.set("needToReload",!1),this.set("controllers.slides.layersController.noticeMsg","Loading data from Facebook..."),t=this.get("ajaxRequest"),Ember.isEmpty(t)||t.abort(),u=this,f=this.get("setType")==="album"?n.getJSON(r(this.get("setId"),1),function(n){u._photoData(n)}):n.getJSON(i(this.get("setId"),1),function(n){u._photoData(n)}),this.set("ajaxRequest",f)},checkForReload:function(){this.set("needToReload",!0)}.observes("setType","apiKey","id"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&this.loadData()},_photoData:function(n){if(n.error){this.set("firstSlide.bg",undefined),MSPanel.facebookData={},this.get("controllers.slides.layersController").updateDynamicContent(),this.set("controllers.slides.layersController.noticeMsg",'<span style="color:#FF4700;">Facebook API ERROR#'+n.error.code+"("+n.error.type+"): "+n.error.message+". Please check Facebook settings.<\/span>");return}n=n.data[0],MSPanel.facebookData=n,this.set("photoData",n),this._updateBGImage(),this.set("controllers.slides.layersController.noticeMsg",undefined),this.get("controllers.slides.layersController").updateDynamicContent()},_updateBGImage:function(){var n=this.get("photoData");Ember.isEmpty(n)||this.set("firstSlide.bg",u(n.images,this.get("imgSize")))}.observes("imgSize"),onTypeChange:function(){this.set("isPhotostream",this.get("setType")==="photostream")}.observes("setType").on("init")})}(jQuery),function(n){function t(n){return{name:n.label,tag:"{{"+n.name+"}}",tagName:n.name,generator:function(n){return MSPanel.wpPostsData[n.tagName]||n.tag}}}MSPanel.wpPostData={},MSPanel.PostController=Ember.ObjectController.extend({needs:["slides"],wpData:null,firstSlide:null,needToReload:!1,ajaxRequest:null,setup:function(){Ember.isEmpty(this.get("postType"))&&this.set("postType","post"),this.registerDynamicTags(),Ember.isEmpty(this.get("postCount"))&&this.set("postCount",10),Ember.isEmpty(this.get("postOrder"))&&this.set("postOrder","date"),Ember.isEmpty(this.get("postOrderDir"))&&this.set("postOrderDir","DESC"),Ember.isEmpty(this.get("postImageType"))&&this.set("postImageType","auto");var n=__MSP_POST.types_taxs_terms;this.set("wpData",n),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData();this.onPostTypeChanged(!0)},loadData:function(){var f,i,r,e;this.set("needToReload",!1),f=this.get("ajaxRequest"),Ember.isEmpty(f)||f.abort();var u=this,e,t={};t.post_type=this.get("postType"),t.orderby=this.get("postOrder"),t.order=this.get("postOrderDir"),t.limit=this.get("postCount"),t.post__not_in=this.get("postExcludeIds"),t.slideImage=this.get("postImageType"),t.offset=this.get("postOffset"),t.excerpt_length=this.get("postExcerptLen"),t.action="post_slider_preview",t.nonce=jQuery("#msp-main-wrapper").data("nonce"),Ember.isEmpty(this.get("postCats"))||(i=this.get("postCats"),i[0]===""&&i.splice(0,1),i.length!==0&&(t.cats=i.join(","))),Ember.isEmpty(this.get("postTags"))||(r=this.get("postTags"),r[0]===""&&r.splice(0,1),r.length!==0&&(t.tags=r.join(","))),this.set("previewResults",'<div class="msp-posts-loading">Loading data...<\/div>'),this.set("controllers.slides.layersController.noticeMsg","Loading posts data..."),e=n.post(__MS.ajax_url,t,function(n){n.success?(u.updatePreview(n),u.updateWpPostData(n)):(u.set("previewResults","Error: "+n.message),u.set("controllers.slides.layersController.noticeMsg","Error: "+n.message))},"json"),this.set("ajaxRequest",e)},onPostTypeChanged:function(t){var i=this.get("wpData"),r=this.get("postType"),u,f;Ember.isEmpty(i)||(u=n.map(i.cats[r],function(n){return{value:n.term_taxonomy_id,label:n.name}}),f=n.map(i.tags[r],function(n){return{value:n.term_taxonomy_id,label:n.name}}),this.set("postCatsList",u),this.set("postTagsList",f),t!==!0&&(this.set("postTags",undefined),this.set("postCats",undefined)))}.observes("postType"),onPostImageTypeChanged:function(){this.set("useCustomBg",this.get("postImageType")==="custom")}.observes("postImageType"),updatePreview:function(n){n.preview_results?this.set("previewResults",n.preview_results):(this.set("previewResults",'<div style="margin:20px">Nothing found. Please try another filter. <\/div>'),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in posts settings."))},updateWpPostData:function(n){var t=n.template_tags;if(!t){MSPanel.wpPostsData={},this.set("firstSlide.bg",undefined),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in posts settings."),this.get("controllers.slides.layersController").updateDynamicContent(),this.set("needToReload",!1);return}this.get("postImageType")==="custom"?this.set("firstSlide.bg",this.get("postSlideBg")):t["image-url"].length>0?this.set("firstSlide.bg",t["image-url"]):this.set("firstSlide.bg",undefined),MSPanel.wpPostsData=t,this.set("controllers.slides.layersController.noticeMsg",undefined),this.get("controllers.slides.layersController").updateDynamicContent(),this.set("needToReload",!1)},checkForReload:function(){this.set("needToReload",!0);var n=this;clearTimeout(this.get("reqTo")),this.set("reqTo",setTimeout(function(){n.loadData()},200))}.observes("postType","postCats","postTags","postCount","postImageType","postOrder","postOrderDir","postExcludeIds","postOffset","postExcerptLen"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&(clearTimeout(this.get("reqTo")),this.loadData(),this.registerDynamicTags())},registerDynamicTags:function(){if(MSPanel.dynamicTags){MSPanel.dynamicTags=[],MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,n.map(__MSP_POST.content_tags.general,t));var i=__MSP_POST.content_tags[this.get("postType")];i&&i.length>0&&MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,n.map(i,t))}}})}(jQuery),function(n){function t(n){return{name:n.label,tag:"{{"+n.name+"}}",tagName:n.name,generator:function(n){return MSPanel.wpPostsData[n.tagName]||n.tag}}}MSPanel.wpPostData={},MSPanel.WcproductController=Ember.ObjectController.extend({needs:["slides"],wpData:null,firstSlide:null,needToReload:!1,ajaxRequest:null,setup:function(){Ember.isEmpty(this.get("postType"))&&this.set("postType","product"),this.registerDynamicTags(),Ember.isEmpty(this.get("postCount"))&&this.set("postCount",10),Ember.isEmpty(this.get("postOrder"))&&this.set("postOrder","date"),Ember.isEmpty(this.get("postOrderDir"))&&this.set("postOrderDir","DESC"),Ember.isEmpty(this.get("postImageType"))&&this.set("postImageType","auto");var n=__MSP_POST.types_taxs_terms;this.set("wpData",n),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData();this.onPostTypeChanged(!0)},loadData:function(){var f,i,r,e;this.set("needToReload",!1),f=this.get("ajaxRequest"),Ember.isEmpty(f)||f.abort();var u=this,e,t={};t.post_type=this.get("postType"),t.orderby=this.get("postOrder"),t.order=this.get("postOrderDir"),t.limit=this.get("postCount"),t.post__not_in=this.get("postExcludeIds"),t.slideImage=this.get("postImageType"),t.offset=this.get("postOffset"),t.excerpt_length=this.get("postExcerptLen"),t.only_instock=this.get("wcOnlyInstock"),t.only_featured=this.get("wcOnlyFeatured"),t.only_onsale=this.get("wcOnlyOnsale"),t.action="wc_slider_preview",t.nonce=jQuery("#msp-main-wrapper").data("nonce"),Ember.isEmpty(this.get("postCats"))||(i=this.get("postCats"),i[0]===""&&i.splice(0,1),i.length!==0&&(t.cats=i.join(","))),Ember.isEmpty(this.get("postTags"))||(r=this.get("postTags"),r[0]===""&&r.splice(0,1),r.length!==0&&(t.tags=r.join(","))),this.set("previewResults",'<div class="msp-posts-loading">Loading data...<\/div>'),this.set("controllers.slides.layersController.noticeMsg","Loading products data..."),e=n.post(__MS.ajax_url,t,function(n){n.success?(u.updatePreview(n),u.updateWpPostData(n)):(u.set("previewResults","Error: "+n.message),u.set("controllers.slides.layersController.noticeMsg","Error: "+n.message))},"json"),this.set("ajaxRequest",e)},onPostTypeChanged:function(t){var i=this.get("wpData"),r=this.get("postType"),u,f;Ember.isEmpty(i)||(u=n.map(i.cats[r],function(n){return{value:n.term_taxonomy_id,label:n.name}}),f=n.map(i.tags[r],function(n){return{value:n.term_taxonomy_id,label:n.name}}),this.set("postCatsList",u),this.set("postTagsList",f),t!==!0&&(this.set("postTags",undefined),this.set("postCats",undefined)))}.observes("postType"),onPostImageTypeChanged:function(){this.set("useCustomBg",this.get("postImageType")==="custom")}.observes("postImageType"),updatePreview:function(n){n.preview_results?this.set("previewResults",n.preview_results):(this.set("previewResults",'<div style="margin:20px">Nothing found. Please try another filter. <\/div>'),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in product slider settings."))},updateWpPostData:function(n){var t=n.template_tags;if(!t){MSPanel.wpPostsData={},this.set("firstSlide.bg",undefined),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in product slider settings."),this.get("controllers.slides.layersController").updateDynamicContent(),this.set("needToReload",!1);return}this.get("postImageType")==="custom"?this.set("firstSlide.bg",this.get("postSlideBg")):t["image-url"].length>0?this.set("firstSlide.bg",t["image-url"]):this.set("firstSlide.bg",undefined),MSPanel.wpPostsData=t,this.set("controllers.slides.layersController.noticeMsg",undefined),this.get("controllers.slides.layersController").updateDynamicContent(),this.set("needToReload",!1)},checkForReload:function(){this.set("needToReload",!0);var n=this;clearTimeout(this.get("reqTo")),this.set("reqTo",setTimeout(function(){n.loadData()},200))}.observes("postType","postCats","postTags","postCount","postImageType","postOrder","postOrderDir","postExcludeIds","postOffset","postExcerptLen","wcOnlyOnsale","wcOnlyFeatured","wcOnlyInstock"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&(clearTimeout(this.get("reqTo")),this.loadData(),this.registerDynamicTags())},registerDynamicTags:function(){if(MSPanel.dynamicTags){MSPanel.dynamicTags=[],MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,n.map(__MSP_POST.content_tags.general,t));var i=__MSP_POST.content_tags[this.get("postType")];i&&i.length>0&&MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,n.map(i,t))}}})}(jQuery)